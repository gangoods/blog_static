<svg xmlns="http://www.w3.org/2000/svg" width="1372.802" height="573.058"><defs><style>@font-face{font-family:&quot;Virgil&quot;;src:url(https://unpkg.com/@excalidraw/excalidraw@undefined/dist/excalidraw-assets/Virgil.woff2)}@font-face{font-family:&quot;Cascadia&quot;;src:url(https://unpkg.com/@excalidraw/excalidraw@undefined/dist/excalidraw-assets/Cascadia.woff2)}@font-face{font-family:&quot;Assistant&quot;;src:url(https://unpkg.com/@excalidraw/excalidraw@undefined/dist/excalidraw-assets/Assistant-Regular.woff2)}</style></defs><path fill="#fff" d="M0 0h1372.802v573.058H0z"/><path fill="none" stroke="#1864ab" stroke-linecap="round" d="M277.127 20.801c57.39 1.64 110.88 1.38 214 0m-214 0c68.61-1.82 136.32-1.82 214 0m0 0c-.97 20.75-.96 43.49 0 60m0-60c-.1 14.15.26 27.3 0 60m0 0c-79.91.13-159.93 1.01-214 0m214 0c-53.21.84-106.02.71-214 0m0 0c.39-14.64-1.65-28.97 0-60m0 60c.34-15.57.74-32.85 0-60"/><text x="68.901" fill="#1864ab" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" text-anchor="middle" transform="translate(315.226 39.301)">创建一个socket</text><g stroke-linecap="round"><path fill="none" stroke="#000" d="M497.564 53.95c16.27.19 81.17.66 97.78.52m-98.75-1.46c16.56-.09 84.33-.34 101.07-.13"/><path fill-rule="evenodd" stroke-width="0" d="m598.984 54.06-15.06 4.47-.01-12.93 13.26 5.35"/><path fill="none" stroke="#000" d="M597.664 52.88c-5.11 1.65-9.45 6.45-13.61 6.29m13.61-6.29c-3.19 1.45-6.81 3.09-13.61 6.29m0 0c-.92-2 .61-7.25.04-12.67m-.04 12.67c.51-4.87.19-9.69.04-12.67m0 0c3.08 1.83 8.25 3.28 13.57 6.38m-13.57-6.38c4.06 2.33 9.02 4.38 13.57 6.38m0 0q0 0 0 0m0 0q0 0 0 0"/></g><path fill="none" stroke="#1864ab" stroke-linecap="round" d="M601.817 27.857c64.37 2.89 124.84 2.71 166 0m-166 0c45.93.11 89.92.11 166 0m0 0c.43 15.74 1.12 33.53 0 56m0-56c.59 19.67.27 39.29 0 56m0 0c-55.38-.38-111.5.09-166 0m166 0c-51.55.87-103.31-.15-166 0m0 0c.38-18.67 1.16-37.19 0-56m0 56c-.73-12.01.18-24.78 0-56"/><text x="58.34" fill="#1864ab" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" text-anchor="middle" transform="translate(626.477 32.857)">返回一个</text><text x="58.34" y="23" fill="#1864ab" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" text-anchor="middle" transform="translate(626.477 32.857)">fd文件描述符</text><text dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(812.813 10)">操作系统会为每个tcp socket 分配2个缓冲区</text><text y="26.75" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(812.813 10)">缓冲区: 内核中的一块内存</text><text y="53.5" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(812.813 10)">fd操作的就是这2个缓冲区</text><path fill="none" stroke="#d9480f" stroke-linecap="round" d="M305.608 311.699c68.33.36 137.08-2.05 179.34 0m-179.34 0c47.79 1.81 93.03 2.16 179.34 0m0 0c.84 62.01.74 123.15 0 228.65m0-228.65c.76 58.53.54 116.75 0 228.65m0 0c-53.38-.56-107.54-.61-179.34 0m179.34 0c-40.9-.48-81.41-.09-179.34 0m0 0c2.15-85.59 2.59-169.21 0-228.65m0 228.65c.05-82.51-.09-165.08 0-228.65"/><path fill="none" stroke="#862e9c" stroke-linecap="round" d="M308.458 361.73c62.86-2.24 126.52-1.2 176 0m-176 0c38.57.02 78.16-.21 176 0m0 0c-.44 12.75-.95 26.78 0 35m0-35c-.21 8.94.03 17.46 0 35m0 0c-43.21.61-89.06 1.21-176 0m176 0c-46.78.66-93.48-.56-176 0m0 0c1.21-12.18 1.04-27.11 0-35m0 35c-.22-10.34.39-19.46 0-35"/><path fill="none" stroke="#5f3dc4" stroke-linecap="round" d="M309.328 432.576c64.58.92 129.17 2.71 175 0m-175 0c59.71-.81 120.74-1.49 175 0m0 0c-.97 11.91-1.11 22.39 0 35m0-35c-.06 11.74-.59 23.6 0 35m0 0c-57.04 1.16-111.84.2-175 0m175 0c-53.49.12-107.58 1.28-175 0m0 0c.95-9.74-.88-19.41 0-35m0 35c.44-9.64-.7-16.9 0-35"/><text x="40" fill="#862e9c" dominant-baseline="text-before-edge" font-family="Assistant, Segoe UI Emoji" font-size="20" style="white-space:pre" text-anchor="middle" transform="translate(356.458 366.73)">读缓冲区</text><text x="40" fill="#5f3dc4" dominant-baseline="text-before-edge" font-family="Assistant, Segoe UI Emoji" font-size="20" style="white-space:pre" text-anchor="middle" transform="translate(356.828 437.576)">写缓冲区</text><text dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(359.936 180.469)">客户端</text><path fill="none" stroke="#d9480f" stroke-linecap="round" d="M823.727 318.27c43.01 1.98 83.55.92 179.34 0m-179.34 0c50.7.29 100.68 1.13 179.34 0m0 0c.73 62.7 1.12 127.45 0 228.65m0-228.65c.68 75.16.27 150.96 0 228.65m0 0c-61.09 3.01-118.4.8-179.34 0m179.34 0c-66.06.75-132.09.62-179.34 0m0 0c.68-64.25 3.52-127.02 0-228.65m0 228.65c-.17-51.39 1.02-102.83 0-228.65"/><path fill="none" stroke="#862e9c" stroke-linecap="round" d="M826.577 368.301c47.21-.89 94.57-1.52 176 0m-176 0c44.88 1.24 89.47 1.19 176 0m0 0c.73 10.91.64 21.4 0 35m0-35c.13 8.07.48 16.44 0 35m0 0c-64.71 1-129.75 2.82-176 0m176 0c-63.31-1.01-126.68-1.53-176 0m0 0c2.18-13.15-1.24-23.66 0-35m0 35c1.13-6.83-.17-14.06 0-35"/><path fill="none" stroke="#5f3dc4" stroke-linecap="round" d="M827.447 439.148c64.68-.59 129.23.42 175 0m-175 0c43.13-.29 86.72-.45 175 0m0 0c.72 9.01-1.32 18.32 0 35m0-35c.31 9.86.71 18 0 35m0 0c-66.1.87-133.74-.57-175 0m175 0c-47.13-1.75-93.42-1.49-175 0m0 0c-1.82-7.93-2.11-16.31 0-35m0 35c-.66-10.83-1.19-23.27 0-35"/><text x="40" fill="#862e9c" dominant-baseline="text-before-edge" font-family="Assistant, Segoe UI Emoji" font-size="20" style="white-space:pre" text-anchor="middle" transform="translate(874.577 373.301)">读缓冲区</text><text x="40" fill="#5f3dc4" dominant-baseline="text-before-edge" font-family="Assistant, Segoe UI Emoji" font-size="20" style="white-space:pre" text-anchor="middle" transform="translate(874.947 444.148)">写缓冲区</text><text dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(885.066 187.708)">服务端</text><g stroke-linecap="round" mask="url(#mask-IMmEItEC0BN9xFWaWOfrs)"><path fill="none" stroke="#000" stroke-dasharray="8 9" stroke-width="1.5" d="M497.516 449.753c44.63-4.45 88.44-10.3 145.42-15.81m0 0c59.56-17.16 119.49-31.56 177.36-45.4"/><path fill-rule="evenodd" stroke-width="0" d="m820.116 387.643-12.05 8.32-1.76-11.8 12.42 6.31"/><path fill="none" stroke="#000" stroke-width="1.5" d="M820.296 388.543c-3.12 2.83-6.92 4.88-11.73 9.35m0 0c-.83-5.03-1.44-8.65-2.97-12.33m0 0c5.1 1.92 7.63 3 14.7 2.98m0 0q0 0 0 0"/></g><mask id="mask-IMmEItEC0BN9xFWaWOfrs"><path fill="#fff" d="M0 0h920.293v610.965H0z"/><path d="M602.937 422.446h80v23h-80z"/></mask><text x="40" fill="#2b8a3e" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" text-anchor="middle" transform="translate(602.937 422.446)">自动发送</text><text dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="16" style="white-space:pre" transform="translate(1028.28 444.504)">服务端回复消息</text><text y="22.667" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="16" style="white-space:pre" transform="translate(1028.28 444.504)">将数据从用户态的缓冲区拷贝到内核写缓冲区</text><text y="45.333" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="16" style="white-space:pre" transform="translate(1028.28 444.504)">写缓冲区一旦有数据也是自动发送</text><g stroke-linecap="round" mask="url(#mask-3xIg4pBZ_Z-ZqJSurey4o)"><path fill="none" stroke="#000" stroke-dasharray="8 9" stroke-width="1.5" d="M821.42 460.64c-24.72-11.6-94.64-56.44-149.16-69.56-54.52-13.11-148.22-7.7-177.98-9.14"/><path fill-rule="evenodd" stroke-width="0" d="m492.71 383.87 13.78-9.71 1.19 12.39-14.2-4.01"/><path fill="none" stroke="#000" stroke-width="1.5" d="M494.28 381.94c3.82-1.37 5.68-2.49 13.62-6.3m0 0c.39 4.01.89 5.85-.04 12.68m0 0c-4.24-1.51-9.61-5.05-13.58-6.38m0 0q0 0 0 0"/></g><mask id="mask-3xIg4pBZ_Z-ZqJSurey4o"><path fill="#fff" d="M0 0h1248.677v638.236H0z"/><path d="M632.081 380.448h80v23h-80z"/></mask><text x="40" fill="#2b8a3e" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" text-anchor="middle" transform="translate(632.081 380.448)">自动发送</text><text fill="#d9480f" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(372.071 315.83)">内核</text><text fill="#d9480f" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(895.78 319.004)">内核</text><path fill="none" stroke="#000" stroke-linecap="round" d="M305.851 217.084c53.9.87 104.37 1.13 178.16 0m-178.16 0c61.65-.62 121.91-1.53 178.16 0m0 0c-2.34 27.8-1.82 52.61 0 93.08m0-93.08c-.74 36.02-1.06 74.13 0 93.08m0 0c-69.57-2.24-142.38-1.43-178.16 0m178.16 0c-58.13 1.86-118.39.88-178.16 0m0 0c-1.91-33.51.67-64.68 0-93.08m0 93.08c1.15-28.29 1.3-57.3 0-93.08"/><g stroke-linecap="round"><path fill="none" stroke="#82c91e" stroke-width=".5" d="M306.632 248.527q0 0 0 0m0 0q0 0 0 0m-.26 6.4c2.01-2.33 3.29-4.54 5.25-6.04m-5.25 6.04c1.41-1.79 2.69-3.11 5.25-6.04m-4.86 11.68c3.33-1.53 5.39-4.63 10.5-12.07m-10.5 12.07c3.3-3.75 7.56-9.69 10.5-12.07m-10.76 18.47c5.21-7.94 10.95-12.02 15.75-18.11m-15.75 18.11c3.15-3.67 8.94-9.48 15.75-18.11m-15.35 23.75c4.58-3.08 7.58-11.19 20.99-24.15m-20.99 24.15c4.72-6.26 10.89-11.39 20.99-24.15m-21.26 30.55c8.56-8.45 14.35-18.37 26.25-30.19m-26.25 30.19c4.83-5.88 10.9-12.99 26.25-30.19m-25.19 35.08c12.07-13.5 23.36-28.94 30.83-35.47m-30.83 35.47c11.54-13.81 24.55-28.43 30.83-35.47m-25.85 35.83c10.51-14.64 23.95-29.25 30.84-35.47m-30.84 35.47c10.72-11.72 19.92-23.93 30.84-35.47m-25.19 35.07c5.71-8.31 14.76-17.91 30.83-35.47m-30.83 35.47c11.82-12.75 22.8-25.04 30.83-35.47m-25.85 35.83c9.67-12.43 20.95-24.95 30.84-35.47m-30.84 35.47c10.97-13.73 22.6-25.82 30.84-35.47m-25.85 35.83c8.77-12.12 18.45-24.16 31.49-36.22m-31.49 36.22c7.77-9.28 15.04-16.88 31.49-36.22m-25.85 35.83c6.52-6.65 14.46-16.12 30.84-35.47m-30.84 35.47c7.37-8.51 14.09-17.84 30.84-35.47m-25.85 35.83c13.29-15.6 22.82-26.41 31.49-36.23m-31.49 36.23c7.81-9.7 16.87-20.03 31.49-36.23m-25.85 35.83c9.49-12.53 22.79-26.58 30.84-35.47m-30.84 35.47c6.82-8.27 12.65-16.33 30.84-35.47m-25.85 35.83c7.47-9.51 17.32-21.14 31.49-36.22m-31.49 36.22c7.62-8.44 15.91-17.43 31.49-36.22m-25.85 35.83c7.85-7.33 14.77-15.78 30.84-35.47m-30.84 35.47c9.59-11.07 20.41-22.84 30.84-35.47m-25.85 35.83c9.47-8.36 16.03-20.81 31.49-36.23m-31.49 36.23c9.86-11.03 19.74-23.74 31.49-36.23m-25.85 35.84c6.58-8.52 15.96-20.87 30.84-35.48m-30.84 35.48c10.67-12.6 20.7-23.87 30.84-35.48m-25.85 35.84c9.37-12.42 20.9-22.39 31.49-36.23m-31.49 36.23c12.08-15.04 25.12-28.85 31.49-36.23m-25.85 35.83c11.08-10.04 20.16-20.18 30.84-35.47m-30.84 35.47c12.39-13.95 25.17-28 30.84-35.47m-25.85 35.83c8.61-11.36 19.43-18.22 31.49-36.22m-31.49 36.22c10.46-12.78 22.08-25.79 31.49-36.22m-25.85 35.83c7.66-9.74 14.49-17.06 30.84-35.47m-30.84 35.47c5.73-6.36 12.44-14.18 30.84-35.47m-25.85 35.83c9.7-11 16.58-17.75 30.83-35.47m-30.83 35.47c7.21-8.26 13.47-16.77 30.83-35.47m-25.19 35.07c11.34-12.75 21.38-26.33 30.84-35.47m-30.84 35.47c7.22-7.97 13.99-15.1 30.84-35.47m-25.85 35.83c8.5-9.22 13.38-17.11 30.84-35.47m-30.84 35.47c12.14-13.91 23.28-25.76 30.84-35.47m-25.2 35.08c10.74-11.13 16.64-18.45 30.84-35.47m-30.84 35.47c6.45-7.84 14.53-15.56 30.84-35.47m-25.85 35.83c8.7-10.64 22.64-23.62 30.84-35.47m-30.84 35.47c10.14-12.92 19.9-24.74 30.84-35.47m-25.2 35.07c11.32-12.85 23.82-26.19 30.84-35.47m-30.84 35.47c6.9-6.83 13.46-15.65 30.84-35.47m-25.85 35.83c10.02-11.58 19.25-20.34 30.84-35.47m-30.84 35.47c5.73-6.88 12.7-16.1 30.84-35.47m-25.2 35.08c10.96-11.59 18.71-24.75 30.84-35.47m-30.84 35.47c9.78-10.9 18.73-22.15 30.84-35.47m-25.85 35.83c8.19-9.85 14.93-19.12 30.84-35.47m-30.84 35.47c8.57-9.11 17.06-17.51 30.84-35.47m-25.2 35.07c11.61-16.01 25.88-27.59 30.84-35.47m-30.84 35.47c11.02-11.8 21.51-24.96 30.84-35.47m-25.85 35.83c7.05-10.5 17.58-17.92 30.84-35.47m-30.84 35.47c8.15-9.6 16.47-17.58 30.84-35.47m-25.85 35.83c11.26-13.7 24.16-27.2 31.49-36.22m-31.49 36.22c12.67-13.28 24.13-27.84 31.49-36.22m-25.85 35.83c6.83-6.27 13.29-15.91 28.87-33.21m-28.87 33.21c9.96-12.33 22.67-24.65 28.87-33.21m-23.88 33.57c5.68-6.64 11.95-12.55 23.62-27.17m-23.62 27.17c4.83-5.2 10.92-10.99 23.62-27.17m-17.98 26.78c6.72-6.85 14.78-17.97 18.37-21.14m-18.37 21.14c7.24-8.08 14.06-14.54 18.37-21.14m-13.38 21.5c3.63-6.8 10.39-11.04 13.12-15.1m-13.12 15.1c4.39-6.29 9.23-11.48 13.12-15.1m-7.48 14.7c1.7-1.92 5.59-6.23 7.22-8.3m-7.22 8.3c1.74-2.04 3.76-4.4 7.22-8.3"/><path fill="none" stroke="#5f3dc4" d="M306.632 248.527c56.71.44 117.21-1.77 175 0m-175 0c64.34-1.36 128.71-1.48 175 0m0 0c-1.74 8.06 1.59 17.85 0 35m0-35c-.43 8.21.96 16.38 0 35m0 0c-47.35-2.35-93.52-.1-175 0m175 0c-69.48-.46-137.35 1.33-175 0m0 0c1.77-13.85.41-27.41 0-35m0 35c.52-6.5-.5-14.01 0-35"/></g><text x="30" fill="#5f3dc4" dominant-baseline="text-before-edge" font-family="Assistant, Segoe UI Emoji" font-size="20" style="white-space:pre" text-anchor="middle" transform="translate(364.132 253.527)">缓冲区</text><text fill="#d9480f" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(348.514 220.745)">应用(用户态)</text><g stroke-linecap="round"><path fill="none" stroke="#000" d="M297.118 271.532c-7.6 10.21-40.38 36.77-46.7 61.34s.47 65.75 8.79 86.07c8.31 20.33 34.15 29.85 41.12 35.88m-4.26-183.96c-7.74 10.3-40.35 38.49-46.64 63.35-6.28 24.85.46 65.59 8.95 85.77 8.5 20.18 35.14 29.49 42.04 35.34"/><path fill-rule="evenodd" stroke-width="0" d="m301.588 454.092-17.55-2.07 8.72-9.3 8.84 13.73"/><path fill="none" stroke="#000" d="M300.418 455.322c-3.22-.45-8.69-.95-14.91-1.65m14.91 1.65c-3.54-1.09-8.2-.26-14.91-1.65m0 0c.47-2.99 3.49-3.72 6.59-10.83m-6.59 10.83c1.85-4.01 4.46-7.59 6.59-10.83m0 0c3.46 3.66 5.07 9.78 8.32 12.48m-8.32-12.48c2.84 5.63 6.46 10.11 8.32 12.48m0 0q0 0 0 0m0 0q0 0 0 0"/></g><text fill="#343a40" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="16" style="white-space:pre" transform="translate(492.854 473.058)">写缓冲区一旦有数据,</text><text y="22.5" fill="#343a40" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="16" style="white-space:pre" transform="translate(492.854 473.058)">就会自动发送到服务端的读缓冲区</text><text y="45" fill="#343a40" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="16" style="white-space:pre" transform="translate(492.854 473.058)">即使客户端的sokcet关闭,也会发送</text><text y="67.5" fill="#343a40" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="16" style="white-space:pre" transform="translate(492.854 473.058)">这个已经和socket无关了.</text><path fill="none" stroke="#000" stroke-linecap="round" d="M824.896 222.837c51.42-.34 102.71.87 178.16 0m-178.16 0c40.24-2.46 81.79-2.61 178.16 0m0 0c1.42 23.55 1.76 46.66 0 93.08m0-93.08c.28 27.53.37 53.36 0 93.08m0 0c-41.04 2.25-87.06-.78-178.16 0m178.16 0c-68.28-.71-134.76.95-178.16 0m0 0c.34-33.46-.24-68.08 0-93.08m0 93.08c.63-29.19-.69-57.98 0-93.08"/><g stroke-linecap="round"><path fill="none" stroke="#82c91e" stroke-width=".5" d="M825.677 254.28q0 0 0 0m0 0q0 0 0 0m-.26 6.4c1.93-2.56 3.83-3.22 5.25-6.04m-5.25 6.04c1.8-2.3 3.42-4 5.25-6.04m-4.86 11.68c2.52-3.12 4.93-7.22 10.5-12.07m-10.5 12.07c1.77-3.22 4.35-5.31 10.5-12.07m-10.76 18.47c4.34-7.73 12.27-12.03 15.75-18.11m-15.75 18.11c3.77-3.88 7.34-8.99 15.75-18.11m-15.35 23.75c8.19-9.16 17.53-18.74 20.99-24.15m-20.99 24.15c6.51-7.09 11.76-13.44 20.99-24.15m-21.26 30.55c5.71-9.63 14.12-16.51 26.25-30.19m-26.25 30.19c6.55-6.78 11.64-13.72 26.25-30.19m-25.19 35.08c11.13-11.27 21.14-26.65 30.83-35.47m-30.83 35.47c9.96-10.8 20.07-22.1 30.83-35.47m-25.85 35.83c8.16-7.1 12.69-15.77 30.84-35.47m-30.84 35.47c9.7-11.6 19.51-21.76 30.84-35.47m-25.19 35.07c11.5-13.98 19.72-24.45 30.83-35.47m-30.83 35.47c6.03-7.53 12.93-16.5 30.83-35.47m-25.85 35.83c7.91-9.65 12.73-17.09 30.84-35.47m-30.84 35.47c5.76-6.38 12.94-14.95 30.84-35.47m-25.85 35.83c8.89-10.37 14.98-16.51 31.49-36.22m-31.49 36.22c9.37-11.34 18.34-21.27 31.49-36.22m-25.85 35.83c7.36-6.81 14.74-16.94 30.84-35.47m-30.84 35.47c7.86-8.7 14.25-17.09 30.84-35.47m-25.85 35.83c11.86-11.01 19.94-24 31.49-36.23m-31.49 36.23c11.63-12.23 22.19-25.26 31.49-36.23m-25.85 35.83c8.52-9.2 13.99-16.56 30.84-35.47m-30.84 35.47c7.43-8.2 15.33-17.09 30.84-35.47m-25.85 35.83c12.37-13.16 25.32-27.01 31.49-36.22m-31.49 36.22c10.71-11.99 21.91-25.21 31.49-36.22m-25.85 35.83c12.38-11.69 22.95-23.41 30.84-35.47m-30.84 35.47c8.24-7.63 15.22-16.52 30.84-35.47m-25.85 35.83c12.85-11.15 20.62-23.65 31.49-36.23m-31.49 36.23c8.03-10.31 16.94-20.07 31.49-36.23m-25.85 35.84c7.99-12.36 18.31-23.09 30.84-35.48m-30.84 35.48c11.23-12.97 22.95-27.69 30.84-35.48m-25.85 35.84c8.66-11.54 20.79-21.48 31.49-36.23m-31.49 36.23c11.73-13.38 22.65-26.11 31.49-36.23m-25.85 35.83c10.34-13.54 23.42-28.71 30.84-35.47m-30.84 35.47c12.57-14.74 23.1-27.74 30.84-35.47m-25.85 35.83c10.83-8.43 18.68-21.55 31.49-36.22m-31.49 36.22c9.47-11.05 17.69-20 31.49-36.22m-25.85 35.83c6.87-7.88 17.86-20.44 30.84-35.47m-30.84 35.47c10.47-11.03 21.29-24.03 30.84-35.47m-25.85 35.83c10.28-7.92 17.08-18.67 30.83-35.47m-30.83 35.47c7.74-10.02 16.82-19.17 30.83-35.47m-25.19 35.07c10.52-11.29 21.67-24.11 30.84-35.47m-30.84 35.47c9.31-9.91 17.93-20.31 30.84-35.47m-25.85 35.83c9.51-12.89 23.37-26.18 30.84-35.47m-30.84 35.47c7.54-9.1 14.22-16.99 30.84-35.47m-25.2 35.08c8.59-10.06 16.96-20.62 30.84-35.47m-30.84 35.47c11.93-12.84 22.73-27.29 30.84-35.47m-25.85 35.83c5.78-8.86 13.05-15.24 30.84-35.47m-30.84 35.47c11.19-13.03 21.68-23.67 30.84-35.47m-25.2 35.07c7.65-10.32 19.76-22.9 30.84-35.47m-30.84 35.47c12.52-13.66 23.06-26.31 30.84-35.47m-25.85 35.83c7.96-7.03 16.34-17.27 30.84-35.47m-30.84 35.47c7.06-7.93 15.53-17.25 30.84-35.47m-25.2 35.08c9.71-11.04 19.78-22.78 30.84-35.47m-30.84 35.47c5.63-6.72 13.46-14.76 30.84-35.47m-25.85 35.83c10.79-13.22 23.28-30.15 30.84-35.47m-30.84 35.47c10.46-12.43 22.35-25.18 30.84-35.47m-25.2 35.07c11.02-13.52 19.23-24.35 30.84-35.47m-30.84 35.47c9.27-11.13 19.1-22.51 30.84-35.47m-25.85 35.83c9.85-11.88 20.85-25.28 30.84-35.47m-30.84 35.47c7.74-10.13 17.76-19.88 30.84-35.47m-25.85 35.83c9.54-10.22 16.5-17.11 31.49-36.22m-31.49 36.22c10-11.85 17.87-21.63 31.49-36.22m-25.85 35.83c9.89-11.51 21.25-24.59 28.87-33.21m-28.87 33.21c10.06-12.38 20.79-23.54 28.87-33.21m-23.88 33.57c10.01-8.24 16.12-17.71 23.62-27.17m-23.62 27.17c7.73-8.87 16.93-19.14 23.62-27.17m-17.98 26.78c5.75-7.77 12.8-17.71 18.37-21.14m-18.37 21.14c4.91-7.29 10.12-13.34 18.37-21.14m-13.38 21.5c3.39-3.25 4.09-4.64 13.12-15.1m-13.12 15.1c5.86-4.51 9.88-10.99 13.12-15.1m-7.48 14.7c3.47-3.79 4.94-7.16 7.22-8.3m-7.22 8.3c2.33-3.07 4.75-5.54 7.22-8.3"/><path fill="none" stroke="#5f3dc4" d="M825.677 254.28c49 1.15 100.46-1.14 175 0m-175 0c69.31.41 138.39 1.6 175 0m0 0c1.68 12.27-.09 27.04 0 35m0-35c1.01 11.76-.34 22.35 0 35m0 0c-61.06-.25-118.58.54-175 0m175 0c-54-.87-108.44-.85-175 0m0 0c.29-8.19-.05-19 0-35m0 35c-.94-8.85.12-16.11 0-35"/></g><text x="30" fill="#5f3dc4" dominant-baseline="text-before-edge" font-family="Assistant, Segoe UI Emoji" font-size="20" style="white-space:pre" text-anchor="middle" transform="translate(883.177 259.28)">缓冲区</text><text fill="#d9480f" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(867.559 226.498)">应用(用户态)</text><g stroke-linecap="round"><path fill="none" stroke="#343a40" d="M1005.584 386.653c4.96-4 24.1-7.59 29.65-21.94s7.97-48.15 3.65-64.17-24.38-26.63-29.57-31.92m-1.97 120.18c4.87-3.38 21.8-8.04 26.89-23.11s8.25-50.76 3.63-67.3c-4.62-16.55-26.65-27.18-31.34-31.97"/><path fill="#343a40" fill-rule="evenodd" stroke-width="0" d="m1006.724 266.033 13.13 2.95-7.2 9.07-4.87-11.3"/><path fill="none" stroke="#343a40" d="M1006.524 266.423c2.17.63 5.21.82 14.7 2.99m-14.7-2.99c4.66 1.46 9.11 1.78 14.7 2.99m0 0c-.71 3.64-3.59 4.54-7.54 10.19m7.54-10.19c-1.15 2.02-3.78 5.08-7.54 10.19m0 0c-3.27-2.63-2.65-5.86-7.16-13.18m7.16 13.18c-2.2-4.75-4.88-9.84-7.16-13.18m0 0q0 0 0 0m0 0q0 0 0 0"/></g><text fill="#343a40" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="16" style="white-space:pre" transform="translate(1056.802 294.06)">recv服务端读数据,</text><text y="22.667" fill="#343a40" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="16" style="white-space:pre" transform="translate(1056.802 294.06)">是对fd进行read操作,</text><text y="45.333" fill="#343a40" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="16" style="white-space:pre" transform="translate(1056.802 294.06)">是将读缓冲区的数据拷贝到用户态的缓冲区</text><text fill="#343a40" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="16" style="white-space:pre" transform="translate(29.449 326.742)">send发送数据(对fd进行write操作)</text><text y="22.667" fill="#343a40" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="16" style="white-space:pre" transform="translate(29.449 326.742)">是将用户态的数据</text><text y="45.333" fill="#343a40" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="16" style="white-space:pre" transform="translate(29.449 326.742)">拷贝到内核态的写缓冲区</text><path fill="none" stroke="#343a40" stroke-linecap="round" d="M345.618 169.401c24.42-1.51 48.05-2.57 89.66 0m-89.66 0c26.3.66 51.99-.09 89.66 0m0 0c1.63 12.66-1.34 20.8 0 46.26m0-46.26c-.79 16.65.4 35.88 0 46.26m0 0c-32.34.94-66.32.99-89.66 0m89.66 0c-26.94-1.25-55.79-1.46-89.66 0m0 0c1.16-15 1.3-31.71 0-46.26m0 46.26c-.73-12.17-.56-24.69 0-46.26M867.122 179.368c37.64-1.41 72.04-.59 90.68 0m-90.68 0c30.75-.66 59.38-1.64 90.68 0m0 0c-.54 13.38 2.03 29.11 0 43.5m0-43.5c.31 14.31.46 27.9 0 43.5m0 0c-24.01 1.81-48.83.45-90.68 0m90.68 0c-21.52-1.38-41.25-.62-90.68 0m0 0c1.03-16.52-1.08-31.03 0-43.5m0 43.5c-.22-12.98.93-24.25 0-43.5"/><text fill="#c92a2a" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="16" style="white-space:pre" transform="translate(10 420.365)">send操作仅仅是做了个拷贝的事情</text><text y="22.667" fill="#c92a2a" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="16" style="white-space:pre" transform="translate(10 420.365)">真正发送到对端的操作是TCP协议</text><text y="45.333" fill="#c92a2a" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="16" style="white-space:pre" transform="translate(10 420.365)">自动做的事情.</text></svg>