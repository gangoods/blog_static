<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet" viewBox="0 0 357 762"><svg id="d2-svg" width="357" height="762" class="d2-3983142456" viewBox="0 -1 357 762"><rect width="357" height="762" y="-1" stroke-width="0" rx="0" style="fill:#fff"/><style>.d2-3983142456 .text-mono{font-family:&quot;d2-3983142456-font-mono&quot;}@font-face{font-family:d2-3983142456-font-mono;src:url(/stylesheets/font/Virgil-hand.woff2)}.d2-3983142456 .text-mono-bold{font-family:&quot;d2-3983142456-font-mono-bold&quot;}@font-face{font-family:d2-3983142456-font-mono-bold;src:url(/stylesheets/font/Virgil-hand.woff2)}.d2-3983142456 .text-mono-italic{font-family:&quot;d2-3983142456-font-mono-italic&quot;}@font-face{font-family:d2-3983142456-font-mono-italic;src:url(/stylesheets/font/Virgil-hand.woff2)}.connection,.shape{stroke-linejoin:round}.shape{shape-rendering:geometricPrecision}.connection{stroke-linecap:round}.d2-3983142456 .fill-N1,.d2-3983142456 .fill-N2{fill:#000410}.d2-3983142456 .stroke-B1,.d2-3983142456 .stroke-B2,.d2-3983142456 .stroke-N1{stroke:#000410}@media screen and (prefers-color-scheme:dark){.d2-3983142456 .fill-N1{fill:#cdd6f4}.d2-3983142456 .fill-N2{fill:#bac2de}.d2-3983142456 .stroke-N1{stroke:#cdd6f4}.d2-3983142456 .stroke-B1,.d2-3983142456 .stroke-B2{stroke:#cba6f7}}.dots-overlay{fill:url(#dots);mix-blend-mode:multiply}</style><defs><pattern id="dots" width="15" height="15" x="0" y="0" patternUnits="userSpaceOnUse"><path fill="#0A0F25" d="M2 2h1v1H2zM12 2h1v1h-1zM12 12h1v1h-1zM2 12h1v1H2zM2 7h1v1H2zM12 7h1v1h-1zM7 2h1v1H7zM7 12h1v1H7zM7 7h1v1H7z" opacity=".1" style="mix-blend-mode:multiply"/></pattern></defs><defs><filter id="shadow-filter" width="200%" height="200%" x="-50%" y="-50%"><feGaussianBlur in="SourceGraphic" stdDeviation="1.7"/><feFlood flood-color="#3d4574" flood-opacity=".4" result="ShadowFeFlood"/><feComposite in="ShadowFeFlood" in2="SourceAlpha" operator="in" result="ShadowFeComposite"/><feOffset dx="3" dy="5" in="ShadowFeComposite" result="ShadowFeOffset"/><feBlend in="SourceGraphic" in2="ShadowFeOffset" result="ShadowFeBlend"/></filter></defs><g id="left-col"><g style="display:block"><path d="M0 0h256v120H0z" class="shape stroke-N1" style="fill:#fff;stroke-width:2" transform="translate(49)"/><text y="1em" class="text-mono" transform="translate(57 8)"><tspan class="text-mono-bold">enum</tspan> <tspan fill="#458" class="text-mono-bold">Cat</tspan><tspan fill="#bbb"> </tspan>{<tspan fill="#bbb">
</tspan></text><text y="2.3em" class="text-mono" transform="translate(57 8)"><tspan fill="#bbb">    </tspan>Tiger(<tspan fill="#458" class="text-mono-bold">i32</tspan>),<tspan fill="#bbb"> </tspan><tspan fill="#998" class="text-mono-italic">// tag =0
</tspan></text><text y="3.6em" class="text-mono" transform="translate(57 8)"><tspan fill="#bbb">    </tspan>Lion(<tspan fill="#458" class="text-mono-bold">i8</tspan>),<tspan fill="#bbb">   </tspan><tspan fill="#998" class="text-mono-italic">// tag =1
</tspan></text><text y="4.9em" class="text-mono" transform="translate(57 8)"><tspan fill="#bbb">    </tspan>Dog(<tspan fill="#458" class="text-mono-bold">i16</tspan>),<tspan fill="#bbb">   </tspan><tspan fill="#998" class="text-mono-italic">// tag =2
</tspan></text><text y="6.2em" class="text-mono" transform="translate(57 8)">}</text></g></g><g id="top-row" class="empty"><g class="shape"><path fill="transparent" d="M0 180h354v576H0z" class="stroke-B1" style="stroke-width:0"/><path d="M0 180h354v576H0z" class="dots-overlay" style="stroke-width:0"/><path fill="transparent" d="M5 185h344v566H5z" class="stroke-B1" style="stroke-width:0"/></g></g><g id="top-row.stack" class="empty"><g class="shape"><path fill="transparent" d="M0 208h154v548H0z" class="stroke-B1" style="stroke-width:0"/><path d="M0 208h154v548H0z" class="dots-overlay" style="stroke-width:0"/></g><text x="138.5" y="198" class="text-mono fill-N1" style="text-anchor:middle;font-size:18px">栈</text></g><g id="top-row.dot-container2" class="empty"><g class="shape"><path fill="transparent" d="M154 180h100v576H154z" class="stroke-B1" style="stroke-width:0"/><path d="M154 180h100v576H154z" class="dots-overlay" style="stroke-width:0"/></g></g><g id="top-row.mem" class="empty"><g class="shape"><path fill="transparent" d="M254 180h100v576H254z" class="stroke-B1" style="stroke-width:0"/><path d="M254 180h100v576H254z" class="dots-overlay" style="stroke-width:0"/></g></g><g id="top-row.stack.e" class="label-container"><g class="shape"><path fill="transparent" d="M0 208h54v120H0z" class="stroke-B1" style="stroke-width:0"/></g><text x="44.5" y="318" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">e</text></g><g id="top-row.stack._e" class="empty"><g class="shape" filter="url(#shadow-filter)"><path fill="transparent" d="M54 208h100v120H54z" class="stroke-B1" style="stroke-width:0"/><path d="M54 208h100v120H54z" class="dots-overlay" style="stroke-width:0"/></g></g><g id="top-row.stack.b" class="label-container"><g class="shape"><path fill="transparent" d="M0 328h54v160H0z" class="stroke-B1" style="stroke-width:0"/></g><text x="45" y="478" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">b</text></g><g id="top-row.stack._b" class="empty"><g class="shape"><path fill="transparent" d="M54 328h100v160H54z" class="stroke-B1" style="stroke-width:0"/><path d="M54 328h100v160H54z" class="dots-overlay" style="stroke-width:0"/></g></g><g id="top-row.stack.a" class="label-container"><g class="shape"><path fill="transparent" d="M0 488h54v120H0z" class="stroke-B1" style="stroke-width:0"/></g><text x="44.5" y="598" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">a</text></g><g id="top-row.stack._a" class="empty"><g class="shape" filter="url(#shadow-filter)"><path fill="transparent" d="M54 488h100v120H54z" class="stroke-B1" style="stroke-width:0"/><path d="M54 488h100v120H54z" class="dots-overlay" style="stroke-width:0"/></g></g><g id="top-row.dot-container2.hide2" class="empty"><g class="shape"><path fill="transparent" d="M154 180h100v140H154z" class="stroke-B1" style="stroke-width:0"/></g></g><g id="top-row.dot-container2.dot2" class="empty"><g class="shape"><path fill="transparent" d="M154 320h100v70H154z" class="stroke-B1" style="stroke-width:0"/><path d="M154 320h100v70H154z" class="dots-overlay" style="stroke-width:0"/></g></g><g id="top-row.dot-container2.hide3" class="empty"><g class="shape"><path fill="transparent" d="M154 390h100v175H154z" class="stroke-B1" style="stroke-width:0"/></g></g><g id="top-row.dot-container2.dot3" class="empty"><g class="shape"><path fill="transparent" d="M154 565h100v70H154z" class="stroke-B1" style="stroke-width:0"/><path d="M154 565h100v70H154z" class="dots-overlay" style="stroke-width:0"/></g></g><g id="top-row.mem.heap" class="empty"><g class="shape" filter="url(#shadow-filter)"><path fill="transparent" d="M254 180h100v265H254z" class="stroke-B1" style="stroke-width:0"/><path d="M254 180h100v265H254z" class="dots-overlay" style="stroke-width:0"/></g></g><g id="top-row.mem.static" class="empty"><g class="shape" filter="url(#shadow-filter)"><path fill="transparent" d="M254 445h100v311H254z" class="stroke-B1" style="stroke-width:0"/><path d="M254 445h100v311H254z" class="dots-overlay" style="stroke-width:0"/></g></g><g id="top-row.stack._e.&quot;...&quot;"><g class="shape"><path fill="transparent" d="M54 208h100v40H54z" class="stroke-B1" style="stroke-width:2"/></g><text x="104" y="233.5" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">...</text></g><g id="top-row.stack._e.len"><g class="shape"><path fill="#e0ffff" d="M54 248h100v40H54z" class="stroke-B1" style="stroke-width:2"/></g><text x="104" y="273.5" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">len</text></g><g id="top-row.stack._e.ptr"><g class="shape"><path fill="#e0ffff" d="M54 288h100v40H54z" class="stroke-B1" style="stroke-width:2"/></g><text x="104" y="313.5" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">ptr</text></g><g id="top-row.stack._b.&quot;...&quot;"><g class="shape"><path fill="transparent" d="M54 328h100v40H54z" class="stroke-B1" style="stroke-width:2"/></g><text x="104" y="353.5" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">...</text></g><g id="top-row.stack._b.len"><g class="shape"><path fill="#ffffe0" d="M54 368h100v40H54z" class="stroke-B1" style="stroke-width:2"/></g><text x="104" y="393.5" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">len</text></g><g id="top-row.stack._b.ptr"><g class="shape"><path fill="#ffffe0" d="M54 408h100v40H54z" class="stroke-B1" style="stroke-width:2"/></g><text x="104" y="433.5" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">ptr</text></g><g id="top-row.stack._b.capacity"><g class="shape"><path fill="#ffffe0" d="M54 448h100v40H54z" class="stroke-B1" style="stroke-width:2"/></g><text x="104" y="473.5" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">capacity</text></g><g id="top-row.stack._a.&quot;...&quot;"><g class="shape"><path fill="transparent" d="M54 488h100v40H54z" class="stroke-B1" style="stroke-width:2"/></g><text x="104" y="513.5" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">...</text></g><g id="top-row.stack._a.len"><g class="shape"><path fill="#f0fff0" d="M54 528h100v40H54z" class="stroke-B1" style="stroke-width:2"/></g><text x="104" y="553.5" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">len</text></g><g id="top-row.stack._a.ptr"><g class="shape"><path fill="#f0fff0" d="M54 568h100v40H54z" class="stroke-B1" style="stroke-width:2"/></g><text x="104" y="593.5" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">ptr</text></g><g id="top-row.mem.heap.堆"><g class="shape"><path fill="#fff" d="M255 180h78c1 0 2 0 3 1l17 16c1 1 1 2 1 3v20H254v-39c0-1 0-1 1-1Z" class="stroke-B1" style="stroke-width:2"/><path fill="#fff" d="M353 220h-98c-1 0-1 0-1-1v-38c0-1 0-1 1-1h77c1 0 1 0 1 1v17c0 1 1 2 2 2h18c1 0 1 0 1 1v18c-1 1 0 1-1 1Z" class="stroke-B1" style="stroke-width:2"/></g><text x="270" y="210" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:18px">堆</text></g><g id="top-row.mem.heap.pad0" class="invisible"><g class="shape"><path fill="transparent" d="M254 220h100v20H254z" class="stroke-B1" style="stroke-width:2"/></g></g><g id="top-row.mem.heap.pad1" class="invisible"><g class="shape"><path fill="transparent" d="M254 240h100v20H254z" class="stroke-B1" style="stroke-width:2"/></g></g><g id="top-row.mem.heap.d"><g class="shape"><path fill="#87ceeb" d="M254 260h100v21H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="276" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">d</text></g><g id="top-row.mem.heap.l"><g class="shape"><path fill="#87ceeb" d="M254 281h100v21H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="297" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">l</text></g><g id="top-row.mem.heap.r"><g class="shape"><path fill="#87ceeb" d="M254 302h100v21H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="318" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">r</text></g><g id="top-row.mem.heap.o"><g class="shape"><path fill="#87ceeb" d="M254 323h100v21H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="339" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">o</text></g><g id="top-row.mem.heap.w"><g class="shape"><path fill="#87ceeb" d="M254 344h100v21H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="360" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">w</text></g><g id="top-row.mem.heap.pad4" class="invisible"><g class="shape"><path fill="transparent" d="M254 365h100v20H254z" class="stroke-B1" style="stroke-width:2"/></g></g><g id="top-row.mem.heap.pad5" class="invisible"><g class="shape"><path fill="transparent" d="M254 385h100v20H254z" class="stroke-B1" style="stroke-width:2"/></g></g><g id="top-row.mem.heap.pad6" class="invisible"><g class="shape"><path fill="transparent" d="M254 405h100v40H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="430.5" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">...</text></g><g id="top-row.mem.static.只读区"><g class="shape"><path fill="#fff" d="M255 445h78c1 0 2 0 3 1l17 16c1 1 1 2 1 3v20H254v-39c0-1 0-1 1-1Z" class="stroke-B1" style="stroke-width:2"/><path fill="#fff" d="M353 485h-98c-1 0-1 0-1-1v-38c0-1 0-1 1-1h77c1 0 1 0 1 1v17c0 1 1 2 2 2h18c1 0 1 0 1 1v18c-1 1 0 1-1 1Z" class="stroke-B1" style="stroke-width:2"/></g><text x="291.5" y="475" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:18px">只读区</text></g><g id="top-row.mem.static.pad0" class="invisible"><g class="shape"><path fill="transparent" d="M254 485h100v21H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="501" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">...</text></g><g id="top-row.mem.static.d"><g class="shape"><path fill="#fff5ee" d="M254 506h100v21H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="522" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">d</text></g><g id="top-row.mem.static.l3"><g class="shape"><path fill="#fff5ee" d="M254 527h100v21H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="543" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">l</text></g><g id="top-row.mem.static.r"><g class="shape"><path fill="#fff5ee" d="M254 548h100v21H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="564" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">r</text></g><g id="top-row.mem.static.o2"><g class="shape"><path fill="#fff5ee" d="M254 569h100v21H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="585" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">o</text></g><g id="top-row.mem.static.w"><g class="shape"><path fill="#fff5ee" d="M254 590h100v21H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="606" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">w</text></g><g id="top-row.mem.static.o1"><g class="shape"><path fill="pink" d="M254 611h100v21H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="627" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">o</text></g><g id="top-row.mem.static.l2"><g class="shape"><path fill="pink" d="M254 632h100v21H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="648" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">l</text></g><g id="top-row.mem.static.l1"><g class="shape"><path fill="pink" d="M254 653h100v21H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="669" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">l</text></g><g id="top-row.mem.static.e"><g class="shape"><path fill="pink" d="M254 674h100v21H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="690" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">e</text></g><g id="top-row.mem.static.h"><g class="shape"><path fill="pink" d="M254 695h100v21H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="711" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">h</text></g><g id="top-row.mem.static.pad4" class="invisible"><g class="shape"><path fill="transparent" d="M254 716h100v40H254z" class="stroke-B1" style="stroke-width:2"/></g><text x="304" y="741.5" class="text-mono-bold fill-N1" style="text-anchor:middle;font-size:16px">...</text></g><g id="top-row.dot-container2.dot3.circle" class="shape"><circle cx="189" cy="600" r="5" class="shape stroke-B1" style="stroke-width:0"/></g><g id="top-row.dot-container2.dot2.circle" class="shape"><circle cx="189" cy="355" r="5" class="shape stroke-B1" style="stroke-width:0"/></g><g id="top-row.(stack._e.ptr -&gt; mem.heap.o)[0]"><marker id="mk-3488378134" markerHeight="12" markerUnits="userSpaceOnUse" markerWidth="10" orient="auto" refX="7" refY="6" viewBox="0 0 10 12"><path stroke-width="2" d="m0 0 10 6-10 6z" class="connection" style="fill:#000410"/></marker><path fill="none" marker-end="url(#mk-3488378134)" d="m155.983 314.758 94.05 12.226" class="connection stroke-B1" mask="url(#d2-3983142456)" style="stroke-width:2"/><text x="204" y="327" class="text-mono-italic fill-N2" style="text-anchor:middle;font-size:16px">借用</text></g><g id="top-row.(stack._b.ptr -&gt; mem.heap.w)[0]"><path fill="none" marker-end="url(#mk-3488378134)" d="m155.875 408.803 115.376-42.909" class="connection stroke-B1" mask="url(#d2-3983142456)" style="stroke-width:2"/><text x="215" y="393" class="text-mono-italic fill-N2" style="text-anchor:middle;font-size:16px">所有权</text></g><g id="top-row.(stack._a.ptr -&gt; mem.static.h)[0]"><path fill="none" marker-end="url(#mk-3488378134)" d="m139.72 608.522 142.842 84.934" class="connection stroke-B1" mask="url(#d2-3983142456)" style="stroke-width:2"/><text x="212" y="657" class="text-mono-italic fill-N2" style="text-anchor:middle;font-size:16px">借用</text></g><path id="top-row.(mem.static.w -- dot-container2.dot3.circle)[0]" fill="none" d="M252 600h-57" class="connection stroke-B2" mask="url(#d2-3983142456)" style="stroke-width:2;stroke-dasharray:6,5.919384"/><path id="top-row.dot-container2.(dot3.circle -- dot2.circle)[0]" fill="none" d="M189 594V361" class="connection stroke-B2" mask="url(#d2-3983142456)" style="stroke-width:2;stroke-dasharray:6,5.919384"/><g id="top-row.(dot-container2.dot2.circle -&gt; mem.heap.w)[0]"><marker id="mk-2177206569" markerHeight="12" markerUnits="userSpaceOnUse" markerWidth="10" orient="auto" refX="7" refY="6" viewBox="0 0 10 12"><path stroke-width="2" d="m0 0 10 6-10 6z" class="connection" style="fill:#000410"/></marker><path fill="none" marker-end="url(#mk-2177206569)" d="M195 355h55" class="connection stroke-B2" mask="url(#d2-3983142456)" style="stroke-width:2;stroke-dasharray:6,5.919384"/></g><g id="top-row.dot-container2.(dot3.circle -- dot2.circle)[1]"><path fill="none" d="M189 594V361" class="connection stroke-B1" mask="url(#d2-3983142456)" style="stroke-width:2"/><text x="189" y="483" class="text-mono-italic fill-N2" style="text-anchor:middle;font-size:16px">复制到堆上</text></g><mask id="d2-3983142456" width="357" height="762" x="0" y="-1" maskUnits="userSpaceOnUse"><path fill="#fff" d="M0-1h357v762H0z"/><path fill="rgba(0,0,0,0.75)" d="M49 0h240v104H49zM128 180h21v23h-21zM40 302h9v21h-9zM41 462h8v21h-8zM40 582h9v21h-9zM91.5 217.5h25v21h-25zM89.5 257.5h29v21h-29zM90 297.5h28v21H90zM91.5 337.5h25v21h-25zM89.5 377.5h29v21h-29zM90 417.5h28v21H90zM65.5 457.5h77v21h-77zM91.5 497.5h25v21h-25zM89.5 537.5h29v21h-29zM90 577.5h28v21H90zM259 192h22v23h-22zM299.5 260h9v21h-9zM299.5 281h9v21h-9zM300 302h8v21h-8zM299.5 323h9v21h-9zM299 344h10v21h-10zM291.5 414.5h25v21h-25zM259 457h65v23h-65zM291.5 485h25v21h-25zM299.5 506h9v21h-9zM299.5 527h9v21h-9zM300 548h8v21h-8zM299.5 569h9v21h-9zM299 590h10v21h-10zM299.5 611h9v21h-9zM299.5 632h9v21h-9zM299.5 653h9v21h-9zM299.5 674h9v21h-9zM300 695h8v21h-8zM291.5 725.5h25v21h-25z"/><path d="M185 311h38v21h-38zM186 377h58v21h-58zM193 641h38v21h-38zM140 467h98v21h-98z"/></mask></svg></svg>