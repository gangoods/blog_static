<svg xmlns="http://www.w3.org/2000/svg" width="1007.292" height="659.375" preserveAspectRatio="none" style="width:1007px;height:659px;background:#fff" viewBox="0 0 1007 659"><path fill="none" d="M405.208 20.833v.22l10.198-.651 10.197.633 10.197.215 10.198-1.16 10.197.662 10.197-.363 10.198.045 10.197.328 10.198-.649 10.197 1.297 10.197-1.233 10.198.45 10.197.656 10.197-.539 10.198.16 10.197-.104 10.198.22 10.197.062 10.197-.249.078.188.6.272.591.246.533.108.617.311.528.096.225.093-.213.4.693.775-.068.46.51.7.073.518h-.172l.148 7.767.282 7.767-.275 7.767.054 7.767-.037 7.767.109.045-.22.6-.378.533-.151.628-.52.475-.06.665.037.091-.554.329-.603.21-.567.299-.735-.108-.525.4v-.68l-10.197.032-10.197.586-10.198-.143-10.197.914-10.197-.892-10.198-.175-10.197.595-10.198-.932-10.197.153-10.197 1.217-10.198-.222-10.197.311-10.197-1.1-10.198.668-10.197.282L435.8 67.51l-10.197.392-10.197.231-10.198-.13.087.208-.677-.454-.527-.094-.724-.57-.606-.284-.499-.027.162.067-.636-.752.15-.426-.342-.63-.396-.652-.158-.553h-.123l.282-7.767-.263-7.767.31-7.767-.398-7.767.192-7.767.198.082.201-.607.167-.621.181-.616.462-.498.011-.686.082.197.53-.387.602-.212.536-.372.702.027z" style="stroke:#4d4d4d;stroke-width:1.0416666666666667"/><text x="412.5" y="51.63" fill="#2E2E2E" font-size="20.833" font-weight="bold" textLength="179.167">好像就这么一回事?</text><path fill="none" d="M121.875 80.501v.22l10.417-.651 10.416.633 10.417.215 10.417-1.16 10.416.662 10.417-.363 10.417.045 10.416.328 10.417-.649 10.417 1.297 10.416-1.233 10.417.45 10.417.656 10.416-.539 10.417.16 10.417-.104 10.416.22 10.417.062 10.417-.249.078.188.6.272.59.246.533.108.617.311.528.096.225.093-.212.4.693.775-.069.46.51.7.073.518h-.172l.149 6.797.28 6.797-.274 6.797.054 6.797-.037 6.796.109.045-.22.6-.378.533-.15.628-.52.475-.061.666.038.09-.555.33-.603.21-.566.299-.735-.108-.525.399v-.68l-10.417.033-10.417.586-10.416-.144-10.417.915-10.417-.892-10.416-.175-10.417.595-10.417-.933-10.416.154-10.417 1.217-10.417-.222-10.416.311-10.417-1.1-10.417.668-10.416.282-10.417-1.107-10.417.392-10.416.231-10.417-.131.087.21-.677-.455-.527-.095-.724-.57-.606-.284-.5-.026.162.066-.635-.75.149-.427-.341-.63-.397-.652-.158-.554h-.123l.283-6.796-.264-6.797.31-6.797-.398-6.797.192-6.797.198.082.202-.607.167-.621.18-.616.463-.499.01-.685.082.197.53-.387.603-.212.536-.372.702.027z" style="stroke:#333;stroke-width:1.0416666666666667"/><text x="129.167" y="107.43" fill="#2E2E2E" font-size="16.667" textLength="183.333">让资源对象达到期待状态</text><path fill="#17A2B8" d="M451.042 134.994h.194l-.578 5.13.563 5.13.19 5.13-1.03 5.13.66 5.13-.013-.07-4.23.517-4.16.872-4.109 1.12-4.28.267-4.04 1.461.1.503 3.951-.242 4.246 1.226 4.28 1.405 4.073.364 4.183.91h.063l-.093 5.131.195 5.13.056 5.13.321 5.13-.542 5.13v1.865l10.396.023 10.396-1.18 10.396.58 10.397.663 10.396-3.953 10.396 3.888 10.396-2.709 10.397 2.307 10.396-2.858 10.396 1.185 10.396 2.25 10.397-2.195 10.396.427 10.396.649 10.396.215 10.396-1.167 10.397.809 10.396-2.388 10.396 2.38 10.396.733 10.397-.288 10.396.468 10.396-3.045 10.397-.47 10.396.086 10.396 1.562 10.396-.382 10.396 2.439 10.397-2.378 10.396-.468 10.396 1.587 10.396-2.486 10.397.41 10.396 3.244 10.396-.592 10.396.83 10.397-2.934 10.396 1.78 10.396.754 10.396-2.952 10.397 1.046 10.396.616 10.396 1.46 10.396-1.822 10.396 1.297 10.397-2.823 10.396-.343 10.396 3.28 10.396-3.39 10.397 3.405 10.396-1.414h.574l-1.318-9.844-.239-9.844 2.257-9.843-2.106-9.844.832-9.844.388.388-2.833-2.833-1.317-1.317-2.17-2.17-2.24-2.24-2.245-2.244v.13l-10.395 1.888-10.396-.314-10.396-1.234-10.396.274-10.396-1.106-10.396 2.352-10.395-1.56-10.396.049-10.396-2.17-10.396.565-10.396 2.6-10.396-.28-10.395-1.314-10.396-.775-10.396.286-10.396-1.298-10.396 3.059-10.396.902-10.395-.592-10.396.468-10.396-2.31-10.396.622-10.396-1.32-10.396 1.867-10.395-.104-10.396.849-10.396-2.172-10.396.264-10.396 1.605-10.396.344-10.395-3-10.396.886-10.396.953-10.396-2.111-10.396 2.678-10.396-.265-10.395-.996-10.396.675-10.396 1.629L555 134.124l-10.396 1.745-10.396-.082-10.395-.472-10.396.07-10.396-.076-10.396-2.05-10.396.621-10.396-.168-10.396 1.459-10.395-.177" style="stroke:#1592a6;stroke-width:1.0416666666666667"/><path fill="#17A2B8" d="M970.833 134.994h.195l-.578 2.083.562 2.083.191 2.084-1.03 2.083.66 2.083v-.072l2.084-.323 2.083.04 2.083.292 2.084-.577 2.083.64.362.363-2.858-2.859-1.8-1.8-1.671-1.671-2.423-2.422-2.027-2.027" style="stroke:#1592a6;stroke-width:1.0416666666666667"/><text x="462.5" y="160.881" fill="#FFF" font-size="16.667" textLength="417.708">很显然,不可能直白简单地根据描述用for循环不断的获取,</text><text x="462.5" y="180.282" fill="#FFF" font-size="16.667" textLength="497.917">我们很容易想到, 先获取数据,之后用监听的方式, 有变化才采取行动.</text><path fill="none" d="M15.625 143.652v.22l10.523-.651 10.524.633 10.524.215 10.523-1.16 10.524.662 10.523-.363 10.523.045 10.524.328 10.523-.649 10.524 1.297 10.523-1.233 10.524.45 10.524.656 10.523-.539 10.524.16L184 143.62l10.524.22 10.523.062 10.524.361 10.523.09 10.524.008 10.523-.442 10.524.217 10.523.249 10.524-1.483 10.523 1.458 10.524-1.016 10.523.865 10.524-1.071 10.523.444 10.524.844 10.523-.823 10.524.16 10.523.243 10.524.08 10.523-.437 10.524.304 10.523-.896 10.524.596.038.092.624.328.575.211.612.298.443-.107.654.399-.21-.087.255.593.424.664.2.571.526.706.025.499h-.06l-.059 6.797.199 6.797-.311 6.797.051 6.796.18 6.797.208.087-.312.56-.148.63-.583.448-.039.675-.346.547.078.19-.73-.098-.54.365-.56.315-.519.413-.675.035v-.004l-10.524.486-10.523-1.059-10.524-.128-10.523 1.23-10.524-1.272-10.523 1.277-10.524-.315-10.523-.494-10.524-.09-10.523.847-10.524-.79-10.523.929-10.524-1.193-10.523 1.22-10.524-.14-10.523-.249-10.524-.206-10.523.708-10.524-.118-10.523-.463-10.524.103-10.523-.415-10.524.882-10.523-.585-10.524.019-10.523-.814-10.524.212-10.524.975-10.523-.105-10.523-.493-10.524-.29-10.523.107-10.524-.487-10.523 1.147-10.524.338-10.523-.222-10.524.176-10.523-.866-10.524.142.012.028-.653-.396-.5-.029-.594-.256-.549-.146-.662-.421-.074-.03-.213-.577-.06-.513-.203-.573-.591-.732-.08-.522h-.067l.12-6.797-.265-6.796.335-6.797-.033-6.797-.09-6.797-.032-.013.322-.557.432-.512-.09-.727.446-.506.143-.631.038.091.566-.298.593-.236.586-.253.49-.48z" style="stroke:#333;stroke-width:1.0416666666666667"/><text x="22.917" y="170.581" fill="#2E2E2E" font-size="16.667" textLength="395.833">必须不断获取资源信息(当前状态和期待状态)进行对比</text><path fill="#17A2B8" d="M415.625 216.504h.195l-.579 3.19.563 3.19.191 3.19-1.03 3.19.66 3.19-.014-.07-4.23.517-4.159.872-4.11 1.12-4.28.267-4.04 1.461.1.503 3.952-.242 4.245 1.226 4.281 1.405 4.073.363 4.182.912h.063l-.093 3.19.195 3.19.056 3.19.321 3.19-.542 3.19v1.864l10.469.023 10.469-1.18 10.468.581 10.469.663 10.469-3.954 10.469 3.888 10.468-2.708 10.469 2.306 10.469-2.858 10.469 1.185 10.468 2.25 10.469-2.195 10.469.428 10.468.648 10.47.216 10.468-1.168 10.469.81 10.468-2.389 10.47 2.38 10.468-.79h.508l-.096-5.963.156-5.964-1.015-5.963-.157-5.964.604-5.963-.407-.407-1.715-1.715-2.173-2.174-1.509-1.508-2.644-2.644-1.969-1.97v-.952l-10.471 1.587-10.472-2.486-10.471.41-10.472 3.244-10.471-.592-10.472.83-10.471-2.934-10.472 1.78-10.471.754-10.472-2.952-10.471 1.046-10.472.616-10.471 1.46-10.471-1.822-10.472 1.297-10.472-2.823-10.471-.343-10.471 3.28-10.472-1.4" style="stroke:#1592a6;stroke-width:1.0416666666666667"/><path fill="#17A2B8" d="M614.583 216.504h.195l-.578 2.083.562 2.084.191 2.083-1.03 2.083.66 2.084v-.072l2.084-.323 2.083.04 2.083.291 2.084-.577 2.083.64.362.363-2.858-2.858-1.8-1.8-1.671-1.672-2.423-2.422-2.027-2.027" style="stroke:#1592a6;stroke-width:1.0416666666666667"/><text x="427.083" y="242.391" fill="#FFF" font-size="16.667" textLength="177.083">想到这样的设计, 没毛病</text><path fill="none" d="M51.042 215.462v.22l10.29-.651 10.29.633 10.29.215 10.291-1.16 10.29.662 10.291-.363 10.29.045 10.29.328 10.291-.649 10.29 1.297 10.291-1.233 10.29.45 10.29.656 10.291-.54 10.29.161 10.291-.104 10.29.22 10.29.062 10.291.361 10.29.09 10.291.008 10.29-.442 10.291.217 10.29.249 10.29-1.483 10.291 1.458 10.29-1.016 10.291.865 10.29-1.071 10.29.444 10.291.844 10.29-.824 10.291.051.014.034.62.319.6.269.533.11.628.337.551.152-.183-.076.519.703.328.624.211.576.298.611.048.508h-.168l-.059 6.797.01 6.797.196 6.796-.048 6.797.069 6.797.218.09-.518.476-.299.567-.06.665-.532.47-.03.679-.069-.167-.434.619-.617.175-.55.34-.73-.094-.546.347v.332l-10.29.283-10.29-1.107-10.291.392-10.29.231-10.291.548-10.29-.683-10.29.486-10.291-1.059-10.29-.128-10.291 1.23-10.29-1.272-10.29 1.277-10.291-.315-10.29-.494-10.291-.09-10.29.847-10.29-.79-10.291.928-10.29-1.192-10.291 1.22-10.29-.14-10.29-.249-10.291-.206-10.29.708-10.291-.118-10.29-.463-10.29.103-10.291-.415-10.29.882-10.291-.585-10.29.019-10.29-.814-10.291.634-.054-.13-.465.056-.603-.276-.652-.396-.626-.334-.547-.14-.07-.03-.394-.65.11-.444-.14-.546-.313-.617-.413-.66h.241l-.288-6.797.077-6.797-.165-6.796.234-6.797-.099-6.797.08.033.341-.549-.007-.693.275-.577.43-.512.101-.648.076.182.446-.59.631-.143.635-.134.488-.488z" style="stroke:#333;stroke-width:1.0416666666666667"/><text x="58.333" y="242.391" fill="#2E2E2E" font-size="16.667" textLength="325">先List获取全部, 接着Watch监听数据的变化</text><path fill="#17A2B8" d="M341.146 268.197h.194l-.578 7.07.563 7.07.19 7.07-1.03 7.07.66 7.071-.013-.07-4.23.516-4.16.873-4.108 1.12-4.28.267-4.041 1.46.1.503 3.952-.241 4.245 1.226 4.28 1.405 4.074.363 4.182.911h.063l-.093 7.07.195 7.071.056 7.07.321 7.07-.542 7.071v1.864l10.52.023 10.522-1.18 10.52.58 10.521.664 10.521-3.954 10.52 3.888 10.522-2.709 10.52 2.307 10.521-2.858 10.521 1.185 10.521 2.25 10.52-2.195 10.522.428 10.52.648 10.521.215 10.521-1.167 10.521.809 10.52-2.388 10.522 2.38 10.52.733 10.521-.288 10.521.468 10.521-3.045 10.52-.47 10.522.086 10.52 1.563 10.521-.383 10.521 2.439 10.521-2.378 10.52-.468 10.522 1.587 10.52-2.486 10.521.41 10.521 3.245 10.521-.593 10.52.83 10.522-2.934 10.52 1.78 10.521.754 10.521-1.64h-1.312l1.046-9.803.616-9.803 1.46-9.802-1.822-9.803 1.297-9.803-2.823-9.803 1.538-9.803-.443-.443-1.31-1.31-2.883-2.883-1.28-1.28-2.282-2.282-2.218-2.218v-.745l-10.524-.238-10.524 2.257-10.523-2.106-10.524 2.476-10.523-3.18-10.524 3.25-10.523-.37-10.524-.664-10.523-.55-10.524 1.888-10.523-.314-10.524-1.234-10.523.275-10.524-1.107-10.523 2.352-10.524-1.56-10.523.049-10.524-2.17-10.523.565-10.524 2.6-10.523-.28-10.524-1.314-10.523-.775-10.524.286-10.523-1.297-10.524 3.058-10.523.902-10.524-.592-10.523.468-10.524-2.31-10.523.622-10.524-1.319-10.523 1.866-10.524-.104-10.523.849-10.524-2.172-10.523.264-10.524 1.605-10.523-1.231" style="stroke:#1592a6;stroke-width:1.0416666666666667"/><path fill="#17A2B8" d="M751.563 268.197h.194l-.578 2.083.563 2.083.19 2.084-1.03 2.083.66 2.083v-.072l2.084-.323 2.083.04 2.083.292 2.084-.577 2.083.64.363.363-2.859-2.859-1.8-1.8-1.671-1.67-2.422-2.423-2.028-2.027" style="stroke:#1592a6;stroke-width:1.0416666666666667"/><text x="352.604" y="294.084" fill="#FFF" font-size="16.667" textLength="188.542">就好比快递包裹来了一堆,</text><text x="352.604" y="313.485" fill="#FFF" font-size="16.667" textLength="388.542">你肯定是先从快递员那里将所有快递收下放进屋子里,</text><text x="352.604" y="332.886" fill="#FFF" font-size="16.667" textLength="310.417">然后自己慢慢开箱处理,因为开箱啥的耗时.</text><path fill="none" d="M125.52 286.556v.219l10.591-.65 10.59.632 10.59.215 10.59-1.16 10.591.663 10.59-.363 10.59.044 10.591.329 10.59-.65 10.59 1.298 10.59-1.234 10.591.451 10.59.656 10.59-.54 10.591.161 10.59-.104 10.59.219 10.59-.186.033.077.635.355.6.271.59.247.534.108.555.162.149.062.32.62-.212.401.693.775-.069.46.34.629h.185l-.357 6.796.148 6.797.281 6.797-.274 6.797.017 6.797.033.014-.169.62-.22.6-.378.533-.15.628-.337.551-.076-.183-.475.519-.555.328-.603.211-.566.298-.671.048v-.504l-10.59-.176-10.59.032-10.591.586-10.59-.143-10.59.915-10.59-.892-10.591-.176-10.59.595-10.59-.932-10.59.154-10.591 1.217-10.59-.223-10.59.312-10.591-1.1-10.59.667-10.59.283-10.59-1.107-10.591.492-.013-.031-.56-.173-.52-.075-.675-.455-.528-.094-.65-.393-.178-.073-.284-.606.135-.432-.636-.752.15-.426-.408-.657h.072l-.165-6.797-.03-6.797.282-6.797-.263-6.796.104-6.797.19.078-.123-.741.62-.434.2-.607.168-.62.166-.623.006.015.68-.026.574-.28.53-.387.602-.212z" style="stroke:#333;stroke-width:1.0416666666666667"/><text x="132.813" y="313.485" fill="#2E2E2E" font-size="16.667" textLength="176.042">获取而数据直接处理吗?</text><path fill="#17A2B8" d="M375 357.65h.195l-.579 9.01.563 9.01.191 9.011-1.03 9.01.66 9.01-.014-.07-4.23.517-4.159.872-4.11 1.12-4.28.267-4.04 1.462.1.502 3.952-.241 4.245 1.226 4.281 1.405 4.073.363 4.182.911h.063l-.093 9.01.195 9.011.056 9.01.321 9.01-.542 9.011v1.864l10.33.023 10.33-1.18 10.33.581 10.33.663 10.33-3.954 10.33 3.888 10.329-2.708 10.33 2.306 10.33-2.858 10.33 1.185 10.33 2.25 10.33-2.195 10.33.428 10.33.648 10.329.215 10.33-1.167 10.33.81 10.33-2.389 10.33 2.38 10.33.733 10.33-.288 10.329.468 10.33-3.045 10.33-.47 10.33.086 10.33 1.563 10.33-.383 10.33 2.439 10.329-2.378 10.33-.468 10.33 1.587 10.33-2.486 10.33.41 10.33 3.245 10.33-.593 10.329.83 10.33-2.934 10.33 1.78 10.33.754 10.33-2.952 10.33 1.046 10.33.616 10.329 1.46 10.33-1.821 10.33 1.296 10.33-2.823 10.33-.343 10.33 3.28 10.33-3.39 10.33 3.405 10.329-.84 10.33-1.318 10.33-.239 10.33 2.258 10.33-2.106 10.33 2.475 10.33-3.18 10.329 3.251 10.33-.37 10.33-1.345h.68l-.55-11.002 1.888-11.003-.314-11.003-1.234-11.002.275-11.003-1.107-11.002 2.352-11.003-1.99-11.003.101.102-2.072-2.072-2.594-2.595-1.95-1.95-1.471-1.47-2.431-2.431v1.194l-10.328-1.313-10.329-.776-10.328.287-10.329-1.298-10.328 3.058-10.328.902-10.329-.592-10.328.468-10.329-2.31-10.328.622-10.328-1.319-10.329 1.866-10.328-.104-10.328.85-10.329-2.173-10.328.264-10.329 1.606-10.328.344-10.328-3-10.329.885-10.328.953-10.329-2.111-10.328 2.678-10.328-.265-10.329-.996-10.328.675-10.328 1.629-10.329-2.893-10.328 1.744-10.329-.082-10.328-.472-10.329.07-10.328-.076-10.328-2.049-10.329.62-10.328-.168-10.328 1.459-10.329.067-10.328.205-10.329-1.257-10.328.62-10.328-.146-10.329 1.936-10.328-.417-10.329-2.534-10.328 1.146-10.328-1.4-10.329 2.404-10.328.889-10.329-.178-10.328-2.722-10.328 2.498-10.329-3.352-10.328 2.62-10.328-1.388-10.329 1.1-10.328.4-10.329.643L375 357.65" style="stroke:#1592a6;stroke-width:1.0416666666666667"/><path fill="#17A2B8" d="M984.375 357.65h.195l-.579 2.083.563 2.083.191 2.084-1.03 2.083.66 2.083v-.072l2.083-.323 2.084.04 2.083.292 2.083-.577 2.084.64.362.363-2.858-2.859-1.8-1.8-1.672-1.67-2.422-2.423-2.027-2.027" style="stroke:#1592a6;stroke-width:1.0416666666666667"/><text x="386.458" y="383.537" fill="#FFF" font-size="16.667" textLength="587.5">1.因为我们需要对资源的不同类型操作采取相应的行动,所以它的操作类型要存储</text><text x="386.458" y="402.938" fill="#FFF" font-size="16.667" textLength="542.708">2.由于一个资源对象,可能多次传递同一个事件,实际上我们只保留一个就行</text><text x="386.458" y="422.339" fill="#FFF" font-size="16.667" textLength="176.042">代码里只有删除的去重?</text><text x="562.5" y="422.339" fill="#FF0" font-size="16.667" textLength="159.375">为啥更新不这样操作?</text><text x="386.458" y="441.74" fill="#FFF" font-size="16.667" textLength="476.042">更新的针对这个资源对象的个体保留最后一个更新操作不就行了?</text><path fill="none" d="M91.667 385.71v.219l10.333-.65 10.333.632 10.334.215 10.333-1.16 10.333.663 10.334-.364 10.333.045 10.333.329 10.334-.65L195 386.287l10.333-1.233 10.334.45 10.333.657 10.333-.54 10.334.16 10.333-.104 10.333.22 10.334.063 10.333.36 10.333.09 10.334.008 10.333-.442 10.333.217 10.334.25L350 385.71l-.096-.232.775.693.46-.068.7.51.452-.086.655.403-.022-.01.504.698-.01.484.294.61.32.62.135.544h.144l-.146 6.797.101 6.797-.298 6.797.297 6.797-.098 6.797.175.072-.277.576-.19.612-.596.443-.298.567-.035.676-.082-.2-.515.425-.607.2-.473.526-.703-.03-.566.3v-.358l-10.333.595-10.334-.932-10.333.154-10.333 1.216-10.334-.222-10.333.311-10.333-1.1-10.334.668-10.333.282-10.333-1.107-10.334.392-10.333.232-10.333.547-10.334-.683-10.333.486-10.333-1.059-10.334-.128-10.333 1.23-10.333-1.272-10.334 1.278-10.333-.315-10.333-.495-10.334-.09-10.333.847-10.333-.478-.04-.096-.47.042-.742-.611-.434.131-.607-.287-.654-.399.079.032-.308-.615-.026-.499-.28-.604-.387-.649-.298-.611h.093l-.138-6.797.294-6.797-.195-6.797.006-6.797-.06-6.797-.195-.08.31-.563.543-.465.212-.602.093-.652.257-.584-.042-.103.603-.211.527-.394.735.109.633-.14z" style="stroke:#333;stroke-width:1.0416666666666667"/><text x="98.958" y="412.638" fill="#2E2E2E" font-size="16.667" textLength="243.75">设计一个队列, 将数据放进该队列</text><path fill="none" d="M138.542 476.92v.22l10.286-.651 10.287.633 10.286.215 10.286-1.16 10.287.663 10.286-.364 10.287.045 10.286.329 10.287-.65 10.286 1.297 10.287-1.233 10.286.45 10.287.656 10.286-.539 10.286.16 10.287-.07-.004-.01.617.31.597.264.636.356.6.271.5.029.218.09.108.533.311.617.32.621-.212.4.476.685h.235l-.338 6.797.288 6.797-.357 6.797.148 6.797.024 6.797.238.098-.498.484-.195.61-.169.62-.22.6-.377.534v-.001l-.55.337-.704-.032-.476.52-.554.328-.662.068v.463l-10.286.176-10.287-1.142-10.286-.176-10.287.032-10.286.586-10.287-.143-10.286.914-10.287-.892-10.286-.175-10.287.595-10.286-.932-10.286.154-10.287 1.216-10.286-.222-10.287.311-10.286-.765-.043-.103-.504-.038-.553-.158-.73-.584-.54-.124-.577-.213.04.017-.075-.52-.454-.676-.094-.527-.57-.725-.067-.515h-.235l.41-6.797-.424-6.797.426-6.797-.105-6.797-.072-6.797-.086-.035.217-.601.504-.481.001-.69.53-.471.054-.668-.073-.177.745.13.571-.286.558-.32.563-.308z" style="stroke:#333;stroke-width:1.0416666666666667"/><text x="145.833" y="503.849" fill="#2E2E2E" font-size="16.667" textLength="150">需要消费这个队列了</text><path fill="#17A2B8" d="M390.104 529.655h.584l-1.735 10.712 1.688 10.713.573 10.713-3.091 10.712 1.765 10.713-.968 10.713.119 10.712.876 10.713-1.731 10.712 3.458 10.713-1.538 10.713v-1.751l10.417 1.201 10.416 1.75 10.417-1.439 10.417.428 10.416-.278 10.417.584 10.417.169 10.416.962 10.417.237 10.417.023 10.416-1.18 10.417.581 10.417.663 10.417-3.954 10.416 3.888 10.417-2.708 10.417 2.306 10.416-2.858 10.417 1.185 10.417 2.25 10.416-2.195 10.417.428 10.417.648 10.416.216 10.417-1.167 10.417.808 10.416-2.388 10.417 2.38 10.417.733 10.416-.288 10.417.468 10.417-3.044 10.416-.47 10.417.085 10.417 1.563 10.416-.382 10.417 2.438 10.417-2.378 10.416-.467 10.417 1.587 10.417-2.487 10.416.41 10.417 3.245 10.417-.592 10.416.83 10.417-2.934 10.417 1.78 10.416.754 10.417-2.953 10.417 1.046 10.416.616 10.417 1.46 10.417-1.821 10.416 1.296 10.417-2.823 10.417 1.538h-1.882l3.28-10.742-3.39-10.742 3.405-10.742-.84-10.742-1.318-10.742-.238-10.743 2.257-10.742-2.106-10.742 2.476-10.742-1.644-10.742-.362-.362-1.318-1.317-2.17-2.171-2.24-2.24-2.213-2.213-2.114-2.114v2.018l-10.417-.314-10.417-1.234-10.416.275-10.417-1.107-10.417 2.352-10.416-1.56-10.417.05-10.417-2.17-10.416.564-10.417 2.6-10.417-.28-10.416-1.313-10.417-.776-10.417.287-10.416-1.298-10.417 3.058-10.417.902-10.416-.592-10.417.468-10.417-2.31-10.416.622-10.417-1.319-10.417 1.866-10.416-.104-10.417.85-10.417-2.173-10.416.265-10.417 1.605-10.417.344-10.416-3-10.417.885-10.417.954-10.416-2.112-10.417 2.679-10.417-.265-10.416-.997-10.417.675-10.417 1.629-10.416-2.893-10.417 1.744-10.417-.082-10.416-.471-10.417.07-10.417-.077-10.416-2.049-10.417.62-10.416-.168-10.417 1.46-10.417.067-10.416.204-10.417-1.257-10.417.62-10.416-.146-10.417 1.936-10.417-1.602" style="stroke:#1592a6;stroke-width:1.0416666666666667"/><path fill="#17A2B8" d="M963.02 529.655h.195l-.578 2.083.563 2.084.19 2.083-1.03 2.083.66 2.084V540l2.084-.323 2.083.04 2.084.292 2.083-.577 2.083.64.363.362-2.858-2.858-1.8-1.8-1.672-1.672-2.422-2.422-2.027-2.027" style="stroke:#1592a6;stroke-width:1.0416666666666667"/><text x="401.563" y="555.542" fill="#FFF" font-size="16.667" textLength="373.958">我们假设namespace控制器接收到一个delete事件</text><text x="401.563" y="574.943" fill="#FFF" font-size="16.667" textLength="551.042">我们需要将该ns下的资源都删除,比如pod,那么就需要去apiserver获取pod</text><text x="401.563" y="594.344" fill="#FFF" font-size="16.667" textLength="507.292">何不将队列中的数据进行缓存, 让数据和apiserver的数据是保持一致,</text><text x="401.563" y="613.745" fill="#FFF" font-size="16.667" textLength="321.875">然后以后有需要什么数据直接从缓存中获取,</text><text x="401.563" y="633.146" fill="#FFF" font-size="16.667" textLength="519.792">这里我们还能得出这个缓存是需要索引的,比如根据namespace来查询.</text><path fill="#28A745" d="M75 540.332v.219l10.417-.65 10.416.632 10.417.215 10.417-1.16 10.416.663 10.417-.363 10.417.045 10.416.328 10.417-.65 10.417 1.298 10.416-1.233 10.417.45 10.417.656 10.416-.54 10.417.161 10.417-.104 10.416.219 10.417.063 10.417.361 10.416.089 10.417.009 10.417-.443 10.416.218 10.417.248 10.417-1.482 10.416 1.458 10.417-1.016 10.417.309.07.171.232-.177.425.29.476.412.263-.101.375.168.034.014.227.4.178.378.017.312.246.407.06.33h-.198l.298.208.091.209-.036.208.059.208-.213.209-.155-.064-.207.346-.143.372.028.443-.196.35-.09.394.09.219-.481-.122-.391.098-.292.336-.488-.134-.28.366v-.54l-10.416 1.216-10.417-.222-10.416.311-10.417-1.1-10.417.668-10.416.282-10.417-1.107-10.417.392-10.416.231-10.417.548-10.417-.683-10.416.486-10.417-1.059-10.417-.128-10.416 1.23L200 545.835l-10.417 1.277-10.416-.315-10.417-.494-10.417-.09-10.416.847-10.417-.79-10.417.929-10.416-1.193-10.417 1.22-10.417-.14-10.416-.249L75 546.582l.006.015-.278.066-.383-.19-.427-.294-.356-.121-.403-.239-.042-.017.119-.256-.333-.443-.147-.366-.403-.472.043-.287h-.14l.324-.208-.035-.209-.164-.208-.097-.208.112-.209-.07-.029.002-.43.506-.222.257-.325.084-.397-.016-.438.092.223.258-.42.398-.08.305-.305.457.063z" style="stroke:#28a745;stroke-width:1.0416666666666667"/><path fill="none" d="M91.146 567.415v.22l10.096-.651 10.096.633 10.096.215 10.096-1.16 10.097.662 10.096-.363 10.096.045 10.096.328 10.096-.649 10.096 1.297 10.096-1.233 10.097.45 10.096.206.057.139.52.078.61.293.576.212.618.312.565.187.077.032.355.635.272.6.246.59.108.534.162.555h.161l.083 6.797-.494 6.797.486 6.797-.339 6.797.103 6.796.172.071-.574.453-.108.646.016.697-.497.484-.229.596.014.034-.558.318-.58.27-.644.109-.55.337-.628.152v-.596l-10.096.892-10.097.275-10.096-.108-10.096.176-10.096-1.142-10.096-.176-10.096.032-10.096.586-10.097-.144-10.096.915-10.096-.892-10.096-.175-10.096.357.03.073-.708-.53-.57-.198-.434.131-.617-.312-.647-.384.235.097-.583-.73-.038-.503-.157-.554-.585-.73-.093-.527h-.033l.077-6.797.183-6.796-.228-6.797.162-6.797-.16-6.797-.178-.074.204-.605.623-.433-.148-.751.638-.426.08-.657.028.066.526-.396.578-.272.697.017.489-.488z" style="stroke:#333;stroke-width:1.0416666666666667"/><text x="98.438" y="594.344" fill="#2E2E2E" font-size="16.667" textLength="116.667">业务逻辑的操作</text><path fill="none" d="M259.896 567.415v.22l10.07-.651 10.069.633 10.07.215 10.069-1.16 10.07.662 10.068-.363 10.07.045 10.07.328 10.069.071-.092-.221.755.643.432-.136.646.383.673.446.532.106-.027-.012.293.61.212.576.312.617.263.598.168.557h.203l.03 6.797.002 6.797-.147 6.797.072 6.797-.16 6.796.225.094-.7.4.204.775-.557.46.022.7-.415.518-.066-.16-.532.382-.482.504-.694-.01-.569.294-.603.21v.353l-10.07.08-10.07-.437-10.068.303-10.07-.895-10.07.892-10.069.275-10.07-.108-10.069.176-10.07-.639-.063-.155-.612-.298-.585-.234-.515-.064-.607-.288-.563-.181.218.09-.519-.703-.298-.611-.06-.514-.532-.708-.03-.5h-.18l.405-6.798-.074-6.796.104-6.797-.367-6.797.112-6.797.103.042.33-.553-.096-.73.365-.54.315-.56.204-.605.086.209.502-.455.651-.094.455-.57.573-.284z" style="stroke:#333;stroke-width:1.0416666666666667"/><text x="267.188" y="594.344" fill="#2E2E2E" font-size="16.667" textLength="76.042">写入缓存?</text><path fill="#28A745" d="M75 630.566v.22l10.417-.651 10.416.633 10.417.215 10.417-1.16 10.416.663 10.417-.364 10.417.045 10.416.328 10.417-.649 10.417 1.297 10.416-1.233 10.417.45 10.417.656 10.416-.539 10.417.16 10.417-.104 10.416.22 10.417.063 10.417.36 10.416.09 10.417.008 10.417-.442 10.416.217 10.417.249 10.417-1.483 10.416 1.458 10.417-1.015 10.417.308.07.172.232-.178.425.29.476.412.263-.101.375.168.034.014.227.4.178.378.017.313.246.407.06.33h-.198l.298.208.091.208-.036.209.059.208-.213.208-.155-.064-.207.346-.143.372.028.443-.196.35-.09.395.09.218-.481-.122-.391.099-.292.336-.488-.135-.28.366v-.54l-10.416 1.216-10.417-.222-10.416.312-10.417-1.1-10.417.667-10.416.282-10.417-1.107-10.417.393-10.416.23-10.417.548-10.417-.683-10.416.486-10.417-1.058-10.417-.13-10.416 1.231L200 636.07l-10.417 1.277-10.416-.315-10.417-.495-10.417-.09-10.416.847-10.417-.79-10.417.929-10.416-1.192-10.417 1.219-10.417-.14-10.416-.248L75 636.816l.006.016-.278.065-.383-.189-.427-.295-.356-.12-.403-.24-.042-.017.119-.255-.333-.443-.147-.366-.403-.472.043-.288h-.14l.324-.208-.035-.208-.164-.209-.097-.208.112-.208-.07-.03.002-.43.506-.222.257-.325.084-.397-.016-.438.092.223.258-.42.398-.08.305-.305.457.063z" style="stroke:#28a745;stroke-width:1.0416666666666667"/><path fill="#333" d="M220.833 122.819h.098l-.29 4.167.282 4.166.095 4.167-.515 4.167.33 4.166" style="stroke:#333;stroke-width:3.125"/><path fill="#333" d="m216.667 133.236.067.027.632 2.003 1.03 2.161.9 2.11.474 1.94 1.063 2.175-.025-.01.721-2.128.847-2.078.935-2.042.633-2.164 1.056-1.994.136.136-1.124.542-.727.94-.679.988-.96.706-.813.854.017.017-.858-.858-.781-.781-.819-.819-.748-.748z" style="stroke:#333;stroke-width:1.0416666666666667"/><path fill="#333" d="M220.833 185.97h.098l-.29 5.899.282 5.898.095 5.898-.515 5.899.33 5.898" style="stroke:#333;stroke-width:3.125"/><path fill="#333" d="m216.667 205.046.067.027.632 2.002 1.03 2.162.9 2.11.474 1.94 1.063 2.175-.025-.01.721-2.128.847-2.078.935-2.043.633-2.163 1.056-1.994.136.136-1.124.542-.727.94-.679.988-.96.706-.813.854.017.017-.858-.858-.781-.782-.819-.818-.748-.748z" style="stroke:#333;stroke-width:1.0416666666666667"/><path fill="#333" d="M220.833 257.78h.098l-.29 5.755.282 5.755.095 5.756-.515 5.755.33 5.755" style="stroke:#333;stroke-width:3.125"/><path fill="#333" d="m216.667 276.14.067.026.632 2.003 1.03 2.162.9 2.11.474 1.94 1.063 2.175-.025-.01.721-2.128.847-2.078.935-2.043.633-2.163 1.056-1.995.136.136-1.124.543-.727.94-.679.987-.96.707-.813.854.017.017-.858-.858-.781-.782-.819-.818-.748-.749z" style="stroke:#333;stroke-width:1.0416666666666667"/><path fill="#333" d="M220.833 328.874h.292l-.867 11.367.844 11.367.286 11.367-1.546 11.367.991 11.368" style="stroke:#333;stroke-width:3.125"/><path fill="#333" d="m216.667 375.293.067.027.632 2.003 1.03 2.162.9 2.11.474 1.94 1.063 2.175-.025-.01.721-2.129.847-2.078.935-2.042.633-2.164 1.056-1.994.136.136-1.124.543-.727.94-.679.987-.96.706-.813.855.017.016-.858-.858-.781-.781-.819-.819-.748-.748z" style="stroke:#333;stroke-width:1.0416666666666667"/><path fill="#333" d="M220.833 428.027h.292l-.867 9.779.844 9.779.286 9.778-1.546 9.779.991 9.779" style="stroke:#333;stroke-width:3.125"/><path fill="#333" d="m216.667 466.504.067.027.632 2.003 1.03 2.161.9 2.11.474 1.94 1.063 2.176-.025-.01.721-2.129.847-2.077.935-2.043.633-2.164 1.056-1.994.136.136-1.124.543-.727.939-.679.988-.96.706-.813.855.017.016-.858-.858-.781-.781-.819-.819-.748-.748z" style="stroke:#333;stroke-width:1.0416666666666667"/><path fill="#333" d="M156.77 546.582h.098l-.289 4.167.281 4.166.096 4.167-.515 4.167.33 4.166" style="stroke:#333;stroke-width:3.125"/><path fill="#333" d="m152.604 556.999.068.027.632 2.003 1.03 2.161.899 2.11.475 1.94 1.063 2.175-.025-.01.72-2.128.848-2.078.935-2.042.632-2.164 1.056-1.994.136.136-1.124.542-.727.94-.678.988-.96.706-.813.854.017.017-.858-.858-.782-.781-.819-.819-.748-.748z" style="stroke:#333;stroke-width:1.0416666666666667"/><path fill="#333" d="M305.208 546.582h.098l-.29 4.167.282 4.166.095 4.167-.515 4.167.33 4.166" style="stroke:#333;stroke-width:3.125"/><path fill="#333" d="m301.042 556.999.067.027.632 2.003 1.03 2.161.9 2.11.474 1.94 1.063 2.175-.025-.01.721-2.128.847-2.078.935-2.042.633-2.164 1.056-1.994.136.136-1.124.542-.727.94-.679.988-.96.706-.813.854.017.017-.858-.858-.781-.781-.819-.819-.748-.748z" style="stroke:#333;stroke-width:1.0416666666666667"/><path fill="#333" d="M156.77 609.733h.098l-.289 4.167.281 4.166.096 4.167-.515 4.167.33 4.166" style="stroke:#333;stroke-width:3.125"/><path fill="#333" d="m152.604 620.15.068.027.632 2.003 1.03 2.161.899 2.11.475 1.94 1.063 2.175-.025-.01.72-2.128.848-2.078.935-2.042.632-2.164 1.056-1.994.136.136-1.124.542-.727.94-.678.988-.96.706-.813.854.017.017-.858-.858-.782-.781-.819-.819-.748-.748z" style="stroke:#333;stroke-width:1.0416666666666667"/><path fill="#333" d="M305.208 609.733h.098l-.29 4.167.282 4.166.095 4.167-.515 4.167.33 4.166" style="stroke:#333;stroke-width:3.125"/><path fill="#333" d="m301.042 620.15.067.027.632 2.003 1.03 2.161.9 2.11.474 1.94 1.063 2.175-.025-.01.721-2.128.847-2.078.935-2.042.633-2.164 1.056-1.994.136.136-1.124.542-.727.94-.679.988-.96.706-.813.854.017.017-.858-.858-.781-.781-.819-.819-.748-.748z" style="stroke:#333;stroke-width:1.0416666666666667"/><path fill="#333" d="M220.833 519.238h.098l-.29 4.219.282 4.219.095 4.218-.515 4.22.33 4.218" style="stroke:#333;stroke-width:3.125"/><path fill="#333" d="m216.667 529.915.067.028.632 2.002 1.03 2.162.9 2.11.474 1.94 1.063 2.175-.025-.01.721-2.128.847-2.078.935-2.043.633-2.163 1.056-1.995.136.136-1.124.543-.727.94-.679.987-.96.707-.813.854.017.017-.858-.858-.781-.782-.819-.818-.748-.748z" style="stroke:#333;stroke-width:1.0416666666666667"/></svg>