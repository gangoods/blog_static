<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.55">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>clean-code – 斯巴拉稀</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<link href="../../../../docs/back-end/go/infrastructure/test.html" rel="prev">
<link href="../../../../favicon.png" rel="icon" type="image/png">
<script src="../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../index.html"> 
<span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../docs/quarto/index.html"> 
<span class="menu-text">Quarto</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">后端</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-">    
        <li>
    <a class="dropdown-item" href="../../../../docs/back-end/go/index.html">
 <span class="dropdown-text">Go</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../../docs/back-end/rust/index.html">
 <span class="dropdown-text">Rust</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../../docs/back-end/python/index.html">
 <span class="dropdown-text">Python</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../../../docs/netprog/index.html"> 
<span class="menu-text">网络编程</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-devops" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Devops</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-devops">    
        <li>
    <a class="dropdown-item" href="../../../../docs/devops/linux/index.html">
 <span class="dropdown-text">linux</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../../docs/devops/docker/index.html">
 <span class="dropdown-text">docker/podman</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../../docs/devops/cicd/index.html">
 <span class="dropdown-text">cicd</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../../docs/devops/k8s/index.html">
 <span class="dropdown-text">k8s</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu--1" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">中间件</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu--1">    
        <li>
    <a class="dropdown-item" href="../../../../docs/middleware/mysql/index_.html">
 <span class="dropdown-text">mysql</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../../docs/middleware/redis/index.html">
 <span class="dropdown-text">redis</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../../../docs/developer/index.html"> 
<span class="menu-text">程序员必备</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../docs/blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../../docs/back-end/go/infrastructure/directory.html">工程设计</a></li><li class="breadcrumb-item"><a href="../../../../docs/back-end/go/infrastructure/clean-code.html">编码规范</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">基础篇</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/env.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">环境准备</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/quick-start.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">快速入门</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/plan9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">汇编</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/pragma-directives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">编译指示</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/variable-type.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">变量与类型的本质</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/unsafe.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">unsafe</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/mem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">程序的内存分布</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/string.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">字符串</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/slice.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">切片</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/map.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Map</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/func-closure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">函数和闭包</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/struct.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">结构体</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/interface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">接口</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/reflect.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">反射</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/defer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">defer</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/panic-recover.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">panic-recover</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/escape.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">逃逸分析</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/gc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GC</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/basic/start-go.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">go程序的启动过程</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">并发</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/concurrency/context.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">context</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/concurrency/channel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">channel</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/concurrency/goroutine.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">goroutine</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/concurrency/lock.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">lock</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/concurrency/sync.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">sync</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">工程设计</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/infrastructure/directory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">目录结构</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/infrastructure/error.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">错误处理</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/infrastructure/test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">测试</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/infrastructure/clean-code.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">编码规范</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">工具与实用库</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/pkg/dlv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">dlv调试</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/pkg/cobra.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">cobra</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../docs/back-end/go/pkg/go-generate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">generate</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#注释" id="toc-注释" class="nav-link active" data-scroll-target="#注释"><span class="header-section-number">1</span> 注释</a></li>
  <li><a href="#context" id="toc-context" class="nav-link" data-scroll-target="#context"><span class="header-section-number">2</span> Context</a></li>
  <li><a href="#crypto-rand" id="toc-crypto-rand" class="nav-link" data-scroll-target="#crypto-rand"><span class="header-section-number">3</span> Crypto Rand</a></li>
  <li><a href="#声明空切片" id="toc-声明空切片" class="nav-link" data-scroll-target="#声明空切片"><span class="header-section-number">4</span> 声明空切片</a></li>
  <li><a href="#错误字符串" id="toc-错误字符串" class="nav-link" data-scroll-target="#错误字符串"><span class="header-section-number">5</span> 错误字符串</a></li>
  <li><a href="#goroutine生命周期" id="toc-goroutine生命周期" class="nav-link" data-scroll-target="#goroutine生命周期"><span class="header-section-number">6</span> Goroutine生命周期</a>
  <ul>
  <li><a href="#import-blank" id="toc-import-blank" class="nav-link" data-scroll-target="#import-blank"><span class="header-section-number">6.1</span> Import Blank</a></li>
  </ul></li>
  <li><a href="#in-band-errors" id="toc-in-band-errors" class="nav-link" data-scroll-target="#in-band-errors"><span class="header-section-number">7</span> In-Band Errors</a></li>
  <li><a href="#缩进错误流" id="toc-缩进错误流" class="nav-link" data-scroll-target="#缩进错误流"><span class="header-section-number">8</span> 缩进错误流</a></li>
  <li><a href="#首字母缩写" id="toc-首字母缩写" class="nav-link" data-scroll-target="#首字母缩写"><span class="header-section-number">9</span> 首字母缩写</a></li>
  <li><a href="#接口interfaces" id="toc-接口interfaces" class="nav-link" data-scroll-target="#接口interfaces"><span class="header-section-number">10</span> 接口（Interfaces）</a></li>
  <li><a href="#bool-类型变量命名" id="toc-bool-类型变量命名" class="nav-link" data-scroll-target="#bool-类型变量命名"><span class="header-section-number">11</span> bool 类型变量命名</a></li>
  <li><a href="#常量命名" id="toc-常量命名" class="nav-link" data-scroll-target="#常量命名"><span class="header-section-number">12</span> 常量命名</a></li>
  <li><a href="#行长度" id="toc-行长度" class="nav-link" data-scroll-target="#行长度"><span class="header-section-number">13</span> 行长度</a></li>
  <li><a href="#包注释" id="toc-包注释" class="nav-link" data-scroll-target="#包注释"><span class="header-section-number">14</span> 包注释</a></li>
  <li><a href="#方法接收者命名" id="toc-方法接收者命名" class="nav-link" data-scroll-target="#方法接收者命名"><span class="header-section-number">15</span> 方法接收者命名</a></li>
  <li><a href="#方法接收者类型" id="toc-方法接收者类型" class="nav-link" data-scroll-target="#方法接收者类型"><span class="header-section-number">16</span> 方法接收者类型</a></li>
  <li><a href="#代码分析" id="toc-代码分析" class="nav-link" data-scroll-target="#代码分析"><span class="header-section-number">17</span> 代码分析</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<p>待整理…</p>
<section id="注释" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="注释"><span class="header-section-number">1</span> 注释</h2>
<p>对象声明的注释应该是完整的句子,即使这看起来有点多余. 当提取到doc文档中时,这种方式可以使它们格式化良好. 注释应以所描述事物的名称开头,并以句点结尾</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb1-1"><a href="#cb1-1"></a><span class="co">// Request represents a request to run a command.</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">type</span> Request <span class="kw">struct</span> <span class="op">{</span> <span class="op">...</span></span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co">// Encode writes the JSON encoding of req to w.</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="kw">func</span> Encode<span class="op">(</span>w io<span class="op">.</span>Writer<span class="op">,</span> req <span class="op">*</span>Request<span class="op">)</span> <span class="op">{</span> <span class="op">...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="context" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="context"><span class="header-section-number">2</span> Context</h2>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>大多数使用Context的函数都应将其作为第一个参数<br> <strong>不要将Context成员添加到结构类型</strong>, 应该<span class="txt-highlight">将ctx参数添加到该类型需要传递的每个方法</span>上</p>
</div>
</div>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">func</span> F<span class="op">(</span>ctx context<span class="op">.</span>Context<span class="op">,</span> <span class="co">/* other arguments */</span><span class="op">)</span> <span class="op">{}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="crypto-rand" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="crypto-rand"><span class="header-section-number">3</span> Crypto Rand</h2>
<p>不要使用软件包 math/rand 生成密钥，即使是一次性密钥也是如此。 在没有种子情况下，生成器是完全可预测的。 将time.Nanoseconds()的作为随机生成器的种子，只有几熵（应该是消耗很少的意思）。 相反，请使用 crypto/rand’s Reader，如果需要文本，请打印为十六进制或base64</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">import</span> <span class="op">(</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>    <span class="st">"crypto/rand"</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>    <span class="co">// "encoding/base64"</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>    <span class="co">// "encoding/hex"</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>    <span class="st">"fmt"</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="op">)</span></span>
<span id="cb3-7"><a href="#cb3-7"></a></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="kw">func</span> Key<span class="op">()</span> <span class="dt">string</span> <span class="op">{</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>    buf <span class="op">:=</span> <span class="bu">make</span><span class="op">([]</span><span class="dt">byte</span><span class="op">,</span> <span class="dv">16</span><span class="op">)</span></span>
<span id="cb3-10"><a href="#cb3-10"></a>    _<span class="op">,</span> err <span class="op">:=</span> rand<span class="op">.</span>Read<span class="op">(</span>buf<span class="op">)</span></span>
<span id="cb3-11"><a href="#cb3-11"></a>    <span class="cf">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">{</span></span>
<span id="cb3-12"><a href="#cb3-12"></a>        <span class="bu">panic</span><span class="op">(</span>err<span class="op">)</span>  <span class="co">// out of randomness, should never happen</span></span>
<span id="cb3-13"><a href="#cb3-13"></a>    <span class="op">}</span></span>
<span id="cb3-14"><a href="#cb3-14"></a>    <span class="cf">return</span> fmt<span class="op">.</span>Sprintf<span class="op">(</span><span class="st">"%x"</span><span class="op">,</span> buf<span class="op">)</span></span>
<span id="cb3-15"><a href="#cb3-15"></a>    <span class="co">// or hex.EncodeToString(buf)</span></span>
<span id="cb3-16"><a href="#cb3-16"></a>    <span class="co">// or base64.StdEncoding.EncodeToString(buf)</span></span>
<span id="cb3-17"><a href="#cb3-17"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="声明空切片" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="声明空切片"><span class="header-section-number">4</span> 声明空切片</h2>
<p>声明空切片时，首选</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">var</span> t <span class="op">[]</span><span class="dt">string</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>其次</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb5-1"><a href="#cb5-1"></a>t <span class="op">:=</span> <span class="op">[]</span><span class="dt">string</span><span class="op">{}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>前者声明nil slice值</strong>，而后者声明非nil但长度为零。 它们在功能上等同，他们 len和 cap均为零，而零切片是首选的风格。</p>
</section>
<section id="错误字符串" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="错误字符串"><span class="header-section-number">5</span> 错误字符串</h2>
<p>错误字符串不应大写（除非以专有名词或缩写开头）或标点符号结束，因为它们通常是在其他上下文之后打印的。 也就是说，<strong>请使用 fmt.Errorf(“something bad”)，不要使用 fmt.Errorf(“Something bad”)</strong>，这样 log.Printf(“Reading %s: %v”, filename, err)格式就不会出现虚假的大写字母中间消息。 这不适用于日志记录，后者是隐式面向行的，并且未在其他消息中合并。</p>
</section>
<section id="goroutine生命周期" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="goroutine生命周期"><span class="header-section-number">6</span> Goroutine生命周期</h2>
<p>当您生成goroutine时，请清楚何时或是否退出。 Goroutine可以通过阻塞通道的发送或接收来泄漏：即使goroutine的阻塞通道不可访问，垃圾收集器也不会终止goroutine。 即使goroutine不会泄漏，在不再需要它们时仍在飞行中也会导致其他细微且难以诊断的问题。 在关闭的通道上发送紧急消息。 “在不需要结果之后”修改仍在使用的输入仍然会导致数据争用。 将goroutine进行任意长时间的飞行可能会导致不可预测的内存使用情况。 尝试使并发代码足够简单，以使goroutine生存期显而易见。 如果那不可行，请记录goroutine何时以及为何退出。 ## Imports 除避免名称冲突外，避免重命名导入； 好的软件包名称不需要重命名。 发生名称冲突时，最好重命名本地的或特定于项目的导入。 导入包是按组组织排序的，组之间有空白行。标准库软件包始终在第一组中</p>
<p>go imports 将为您做到这一点</p>
<section id="import-blank" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="import-blank"><span class="header-section-number">6.1</span> Import Blank</h3>
<p>仅出于辅助作用而导入的软件包（使用语法import _“pkg”）应仅在程序的主软件包或需要它们的测试中导入。 ### Import . 由于循环依赖关系，导入 . 形式不能用于要测试的程序包，因此在测试中很有用</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">package</span> foo_test</span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="kw">import</span> <span class="op">(</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>    <span class="st">"bar/testutil"</span> <span class="co">// also imports "foo"</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>    <span class="op">.</span> <span class="st">"foo"</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="in-band-errors" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="in-band-errors"><span class="header-section-number">7</span> In-Band Errors</h2>
<p>在C和类似语言中，函数通常返回-1这样的值或null来表示错误或没有结果</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb7-1"><a href="#cb7-1"></a><span class="co">// Lookup returns the value for key or "" if there is no mapping for key.</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="kw">func</span> Lookup<span class="op">(</span>key <span class="dt">string</span><span class="op">)</span> <span class="dt">string</span></span>
<span id="cb7-3"><a href="#cb7-3"></a></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="co">// Failing to check a for an in-band error value can lead to bugs:</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>Parse<span class="op">(</span>Lookup<span class="op">(</span>key<span class="op">))</span>  <span class="co">// returns "parse failure for value" instead of "no value for key"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Go对多个返回值的支持提供了更好的解决方案。 函数应该返回一个附加值以指示其其他返回值是否有效，而不是要求客户端检查带内错误值。 该返回值可以是错误，也可以是布尔值（不需要说明时）。 它应该是最终的返回值</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb8-1"><a href="#cb8-1"></a><span class="co">// Lookup returns the value for key or ok=false if there is no mapping for key.</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="kw">func</span> Lookup<span class="op">(</span>key <span class="dt">string</span><span class="op">)</span> <span class="op">(</span>value <span class="dt">string</span><span class="op">,</span> ok <span class="dt">bool</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>鼓励使用更健壮和易读的代码：</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb9-1"><a href="#cb9-1"></a>value<span class="op">,</span> ok <span class="op">:=</span> Lookup<span class="op">(</span>key<span class="op">)</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="cf">if</span> <span class="op">!</span>ok <span class="op">{</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>    <span class="cf">return</span> fmt<span class="op">.</span>Errorf<span class="op">(</span><span class="st">"no value for %q"</span><span class="op">,</span> key<span class="op">)</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="op">}</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="cf">return</span> Parse<span class="op">(</span>value<span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="缩进错误流" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="缩进错误流"><span class="header-section-number">8</span> 缩进错误流</h2>
<p>尝试使普通代码路径保持最小缩进，并缩进错误处理，并首先对其进行处理。 通过允许在视觉上快速扫描正常路径，可以提高代码的可读性。 例如，<strong>不要写</strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb10-1"><a href="#cb10-1"></a><span class="cf">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">{</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>    <span class="co">// error handling</span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>    <span class="co">// normal code</span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>应该写：</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb11-1"><a href="#cb11-1"></a><span class="cf">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">{</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>    <span class="co">// error handling</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>    <span class="cf">return</span> <span class="co">// or continue, etc.</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="op">}</span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="co">// normal code</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>如果该 if语句具有初始化语句，例如：</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb12-1"><a href="#cb12-1"></a><span class="cf">if</span> x<span class="op">,</span> err <span class="op">:=</span> f<span class="op">();</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">{</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>    <span class="co">// error handling</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>    <span class="cf">return</span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>    <span class="co">// use x</span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>那么这可能需要将short变量声明移至其自己的行： ==这样的目的是让业务代码能够直接清晰的看到==</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb13-1"><a href="#cb13-1"></a>x<span class="op">,</span> err <span class="op">:=</span> f<span class="op">()</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="cf">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">{</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>    <span class="co">// error handling</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>    <span class="cf">return</span></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="op">}</span></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="co">// use x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="首字母缩写" class="level2" data-number="9">
<h2 data-number="9" class="anchored" data-anchor-id="首字母缩写"><span class="header-section-number">9</span> 首字母缩写</h2>
<p>名称中的缩写词或首字母缩写词（例如“ URL”或“ NATO”）具有一致的大小写。 例如，“ URL”应显示为“ URL”或“ url”（如在“ urlPony”或“ URLPony”中一样），而从不显示为“ Url”。 例如：ServeHTTP而不是ServeHttp。 对于具有多个已初始化“单词”的标识符，请使用“ xmlHTTPRequest”或“ XMLHTTPRequest”。 当“ ID”是“ identifier”的缩写时，该规则也适用于“ ID”（这在几乎所有情况下都不是“ ego”，“ superego”中的“ id”），因此请写上“ appID”而不是“ appId”。 协议缓冲区编译器生成的代码不受此规则约束。 人工编写的代码要比机器编写的代码具有更高的标准。</p>
</section>
<section id="接口interfaces" class="level2" data-number="10">
<h2 data-number="10" class="anchored" data-anchor-id="接口interfaces"><span class="header-section-number">10</span> 接口（Interfaces）</h2>
<p>Go接口通常属于使用接口类型的值的包中，而不是实现这些值的包中。 实现包应返回具体的（通常是指针或结构）类型：这样，可以将新方法添加到实现中，而无需进行大量重构。 不要在“用于模拟”的API的实现方定义接口； 而是设计API，以便可以使用实际实现的公共API对其进行测试。 在使用接口之前，不要先定义它们：如果没有实际的用法示例，很难知道接口是否是必需的，更不用说它应该包含什么方法了。 ### <strong>接口命名</strong> 根据命名规则，<strong>一种方法的接口，需要在名称后面加上 -er 的后缀</strong>，或者通过代理名词的方式来进行修饰：Reader, Writer,Formatter,CloseNotifier 等</p>
<p><strong>这里最麻烦的是，你的一个接口有多个方法的时候，按照这个方式命名，就不总是很清晰明了。那是否要把结构拆分，变成一个接口对应一个方法呢？我觉得这个取决具体的使用场景了。</strong> <strong>接口我的理解: 按理解来说应该名字倾向于一种功能的名字, 当然也可以是一种东西的名字. 一种类型一样的感觉</strong></p>
<ul>
<li>命名规则基本和上面的结构体类型</li>
<li>单个函数的结构名以 “er” 作为后缀，例如 Reader , Writer</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb14-1"><a href="#cb14-1"></a><span class="kw">type</span> Reader <span class="kw">interface</span> <span class="op">{</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>        Read<span class="op">(</span>p <span class="op">[]</span><span class="dt">byte</span><span class="op">)</span> <span class="op">(</span>n <span class="dt">int</span><span class="op">,</span> err <span class="dt">error</span><span class="op">)</span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>两个函数的接口名综合两个函数名</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw">type</span> WriteFlusher <span class="kw">interface</span> <span class="op">{</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>    Write<span class="op">([]</span><span class="dt">byte</span><span class="op">)</span> <span class="op">(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">error</span><span class="op">)</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>    Flush<span class="op">()</span> <span class="dt">error</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>三个以上函数的接口名，类似于结构体名</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb16-1"><a href="#cb16-1"></a><span class="kw">type</span> Car <span class="kw">interface</span> <span class="op">{</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>    Start<span class="op">([]</span><span class="dt">byte</span><span class="op">)</span> </span>
<span id="cb16-3"><a href="#cb16-3"></a>    Stop<span class="op">()</span> <span class="dt">error</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>    Recover<span class="op">()</span></span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="bool-类型变量命名" class="level2" data-number="11">
<h2 data-number="11" class="anchored" data-anchor-id="bool-类型变量命名"><span class="header-section-number">11</span> bool 类型变量命名</h2>
<p>名称应以 Has, Is, Can 或 Allow 开头</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">var</span> isExist <span class="dt">bool</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="kw">var</span> hasConflict <span class="dt">bool</span></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="kw">var</span> canManage <span class="dt">bool</span></span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="kw">var</span> allowGitHook <span class="dt">bool</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="常量命名" class="level2" data-number="12">
<h2 data-number="12" class="anchored" data-anchor-id="常量命名"><span class="header-section-number">12</span> 常量命名</h2>
<p>常量均需使用全部大写字母组成，并使用下划线分词</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb18-1"><a href="#cb18-1"></a><span class="kw">const</span> APP_VER <span class="op">=</span> <span class="st">"1.0"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="行长度" class="level2" data-number="13">
<h2 data-number="13" class="anchored" data-anchor-id="行长度"><span class="header-section-number">13</span> 行长度</h2>
<p>Go代码中没有严格的行长度限制，但要避免行太长。 同样，请勿添加换行符以使行在可读性更强的情况下保持较短（例如，如果它们是重复的）。 在大多数情况下，人们“不自然地”换行（在函数调用或函数声明的中间，或多或少，例如，尽管周围有一些例外情况），如果参数和简短的变量名数量合理，则不需要换行。长行似乎包含长名，而摆脱长名会很有帮助。 换句话说，换行是因为您所写内容的语义（作为一般规则），而不是因为行长。 如果发现行太长，则更改名称或语义，可能会得到不错的结果。 实际上，这和关于功能应该写多长的建议是完全相同的。 没有强制的规则“一个函数的长度不能超过N行”，但是肯定存在这样一个问题，即函数太长或者小函数过于频繁，解决方案是重新划分函数的功能，而不是开始数行数。 ## Named Result Parameters (命名返回值参数)</p>
<p>考虑一下godoc中的表现。命名结果参数如下：</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb19-1"><a href="#cb19-1"></a><span class="kw">func</span> <span class="op">(</span>n <span class="op">*</span>Node<span class="op">)</span> Parent1<span class="op">()</span> <span class="op">(</span>node <span class="op">*</span>Node<span class="op">)</span> <span class="op">{}</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="kw">func</span> <span class="op">(</span>n <span class="op">*</span>Node<span class="op">)</span> Parent2<span class="op">()</span> <span class="op">(</span>node <span class="op">*</span>Node<span class="op">,</span> err <span class="dt">error</span><span class="op">)</span> <span class="op">{}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>会在godoc中显得繁杂；更好的表现如下：</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb20-1"><a href="#cb20-1"></a><span class="kw">func</span> <span class="op">(</span>n <span class="op">*</span>Node<span class="op">)</span> Parent1<span class="op">()</span> <span class="op">*</span>Node <span class="op">{}</span></span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="kw">func</span> <span class="op">(</span>n <span class="op">*</span>Node<span class="op">)</span> Parent2<span class="op">()</span> <span class="op">(*</span>Node<span class="op">,</span> <span class="dt">error</span><span class="op">)</span> <span class="op">{}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>例外 另一方面，在某些情况下,如果函数返回两个或三个相同类型的参数， 或者如果从上下文中不清楚结果的含义，则添加名称可能很有用。不要仅仅为了避免在内部声明var而命名结果参数; 这就以不必要的API冗长为代价，牺牲了实现的简短性。</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb21-1"><a href="#cb21-1"></a><span class="kw">func</span> <span class="op">(</span>f <span class="op">*</span>Foo<span class="op">)</span> Location<span class="op">()</span> <span class="op">(</span><span class="dt">float64</span><span class="op">,</span> <span class="dt">float64</span><span class="op">,</span> <span class="dt">error</span><span class="op">)</span></span>
<span id="cb21-2"><a href="#cb21-2"></a></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="co">// 不如用下面的好点</span></span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="co">// Location returns f's latitude and longitude.</span></span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="co">// Negative values mean south and west, respectively.</span></span>
<span id="cb21-6"><a href="#cb21-6"></a><span class="kw">func</span> <span class="op">(</span>f <span class="op">*</span>Foo<span class="op">)</span> Location<span class="op">()</span> <span class="op">(</span>lat<span class="op">,</span> long <span class="dt">float64</span><span class="op">,</span> err <span class="dt">error</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>如果函数只有几行，则可以使用裸返回。 一旦成为通用的函数，请明确说明您的返回值。 结论：为了使您可以使用裸返回而命名结果参数是不值得的。<strong>文档的清晰性始终比在函数中保存一两行更为重要</strong></p>
</section>
<section id="包注释" class="level2" data-number="14">
<h2 data-number="14" class="anchored" data-anchor-id="包注释"><span class="header-section-number">14</span> 包注释</h2>
<p>像godoc提出的所有注释一样，包注释必须出现在package子句的旁边，且不能有空行</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb22-1"><a href="#cb22-1"></a><span class="co">// Package math provides basic constants and mathematical functions.</span></span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="kw">package</span> math</span>
<span id="cb22-3"><a href="#cb22-3"></a></span>
<span id="cb22-4"><a href="#cb22-4"></a><span class="co">/*</span></span>
<span id="cb22-5"><a href="#cb22-5"></a><span class="co">Package template implements data-driven templates for generating textual</span></span>
<span id="cb22-6"><a href="#cb22-6"></a><span class="co">output such as HTML.</span></span>
<span id="cb22-7"><a href="#cb22-7"></a><span class="co">....</span></span>
<span id="cb22-8"><a href="#cb22-8"></a><span class="co">*/</span></span>
<span id="cb22-9"><a href="#cb22-9"></a><span class="kw">package</span> template</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>对于“ package main”注释，在二进制名称之后可以使用其他样式的注释（如果使用二进制格式，则可以大写），例如，对于在seedgen包中的package main包，您可以编写</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb23-1"><a href="#cb23-1"></a><span class="co">// Binary seedgen ...</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="kw">package</span> main</span>
<span id="cb23-3"><a href="#cb23-3"></a></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="co">// Command seedgen ...</span></span>
<span id="cb23-5"><a href="#cb23-5"></a><span class="kw">package</span> main</span>
<span id="cb23-6"><a href="#cb23-6"></a></span>
<span id="cb23-7"><a href="#cb23-7"></a><span class="co">// Program seedgen ...</span></span>
<span id="cb23-8"><a href="#cb23-8"></a><span class="kw">package</span> main</span>
<span id="cb23-9"><a href="#cb23-9"></a></span>
<span id="cb23-10"><a href="#cb23-10"></a><span class="co">// The seedgen program ...</span></span>
<span id="cb23-11"><a href="#cb23-11"></a><span class="kw">package</span> main</span>
<span id="cb23-12"><a href="#cb23-12"></a></span>
<span id="cb23-13"><a href="#cb23-13"></a></span>
<span id="cb23-14"><a href="#cb23-14"></a><span class="co">// 都是可以的</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>这些示例，以及这些的明智的变体是可以接受的。 请注意，包注释以小写单词开头的句子是不可可接受的，因为它们是公开可见的 应该用适当的英语写成，包括<strong>首字母大写的句子</strong>。当二进制名称是第一个单词时，将其大写即使它与拼写不完全匹配命令行调用也是必需的 ## 包名 您对包中所有名称的引用都将使用包名完成，因此您可以从标识符中省略该名称。例如，如果您在庞大的包中，您不需要输入ChubbyFile，客户端将其输入为 chubby.ChubbyFile。 而是命名类型 File，客户端将其写为 chubby.File。 <strong>避免使用无意义的程序包名称，例如util，common，misc，api，types 和interfaces</strong>。 请参阅 <a href="http://golang.org/doc/effective_go.html#package-names">http://golang.org/doc/effective_go.html#package-names</a> 和 <a href="http://blog.golang.org/package-names">http://blog.golang.org/package-names</a> 以获得更多信息。</p>
<p><strong>保持package的名字和目录保持一致，尽量采取有意义的包名，简短</strong>，有意义，尽量和标准库不要冲突。包名应该为<strong>小写</strong>单词，不要使用下划线或者混合大小写 ## 文件命名 尽量采取有意义的文件名，简短，有意义，应该为<strong>小写</strong>单词，使用<strong>下划线</strong>分隔各个单词 ## 结构体命名</p>
<ul>
<li>采用驼峰命名法，首字母根据访问控制大写或者小写 ## 传递值 不要为了节省一些字节，将指针作为函数参数传递。 如果函数整个过程中都将 x 仅作为 <em>x 使用，则自变量不应是指针。常见的实例包括传递指向字符串（ </em>string的指针 ）或指向接口值的指针（ *io.Reader）。在这两种情况下，值本身都是固定大小，可以直接传递。这个建议不适用于大型结构，甚至不适用于可能增长的小型结构。</li>
</ul>
</section>
<section id="方法接收者命名" class="level2" data-number="15">
<h2 data-number="15" class="anchored" data-anchor-id="方法接收者命名"><span class="header-section-number">15</span> 方法接收者命名</h2>
<p>方法的接收者的名称应反映其身份。 通常，<strong>其类型的一个或两个字母缩写就足够了</strong>（例如，“客户”是“ c”或“ cl”）。 不要使用通用名称，例如“ me”，“ this”或“ self”，这是面向对象语言的典型标识符，这些标识符赋予该方法特殊的含义。 <strong>在Go中，方法的接收者只是另一个参数</strong>，因此应相应地命名。 该名称不必像方法参数那样具有描述性，因为它的作用是显而易见的，没有任何文档目的。 它可能很短，因为它将出现在该类型的每种方法的几乎每一行上；熟悉承认简洁。也要保持一致：如果在一种方法中将接收器称为“ c”，则在另一种方法中请勿将其称为“ cl”。</p>
<ul>
<li><strong>使用一个字母或2个字母即可</strong></li>
</ul>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb24-1"><a href="#cb24-1"></a><span class="kw">type</span> T <span class="kw">struct</span><span class="op">{}</span> </span>
<span id="cb24-2"><a href="#cb24-2"></a>    </span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="kw">func</span> <span class="op">(</span>t <span class="op">*</span>T<span class="op">)</span>Get<span class="op">(){}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="方法接收者类型" class="level2" data-number="16">
<h2 data-number="16" class="anchored" data-anchor-id="方法接收者类型"><span class="header-section-number">16</span> 方法接收者类型</h2>
<p>对于go初学者，接受者的类型如果不清楚，统一采用指针型</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb25-1"><a href="#cb25-1"></a><span class="kw">func</span> <span class="op">(</span>t <span class="op">*</span>T<span class="op">)</span>Get<span class="op">(){}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>选择在方法上使用值接收器还是指针接收器可能很困难，特别是对于新的Go程序员而言。 如果有疑问，请使用指针，但是有时出于效率的原因（例如，小的不变结构或基本类型的值），值接收器才有意义。 一些有用的准则：</p>
<ul>
<li>如果接收方是map，func或channel，<strong>请不要使用指向它们的指针</strong>。 如果接收方是切片，并且该方法未重新切片或重新分配切片，请不要使用指向该切片的指针。</li>
</ul>
<div class="sourceCode" id="cb26"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb26-1"><a href="#cb26-1"></a><span class="kw">package</span> main</span>
<span id="cb26-2"><a href="#cb26-2"></a></span>
<span id="cb26-3"><a href="#cb26-3"></a><span class="kw">import</span> <span class="op">(</span></span>
<span id="cb26-4"><a href="#cb26-4"></a>    <span class="st">"fmt"</span></span>
<span id="cb26-5"><a href="#cb26-5"></a><span class="op">)</span></span>
<span id="cb26-6"><a href="#cb26-6"></a></span>
<span id="cb26-7"><a href="#cb26-7"></a><span class="kw">type</span> mp <span class="kw">map</span><span class="op">[</span><span class="dt">string</span><span class="op">]</span><span class="dt">string</span></span>
<span id="cb26-8"><a href="#cb26-8"></a></span>
<span id="cb26-9"><a href="#cb26-9"></a><span class="kw">func</span> <span class="op">(</span>m mp<span class="op">)</span> Set<span class="op">(</span>k<span class="op">,</span> v <span class="dt">string</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb26-10"><a href="#cb26-10"></a>    m<span class="op">[</span>k<span class="op">]</span> <span class="op">=</span> v</span>
<span id="cb26-11"><a href="#cb26-11"></a><span class="op">}</span></span>
<span id="cb26-12"><a href="#cb26-12"></a></span>
<span id="cb26-13"><a href="#cb26-13"></a><span class="kw">func</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb26-14"><a href="#cb26-14"></a>    m <span class="op">:=</span> <span class="bu">make</span><span class="op">(</span>mp<span class="op">)</span></span>
<span id="cb26-15"><a href="#cb26-15"></a>    m<span class="op">.</span>Set<span class="op">(</span><span class="st">"k"</span><span class="op">,</span> <span class="st">"v"</span><span class="op">)</span></span>
<span id="cb26-16"><a href="#cb26-16"></a>    fmt<span class="op">.</span>Println<span class="op">(</span>m<span class="op">)</span></span>
<span id="cb26-17"><a href="#cb26-17"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb27-1"><a href="#cb27-1"></a><span class="co">//Channel</span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="kw">package</span> main</span>
<span id="cb27-3"><a href="#cb27-3"></a></span>
<span id="cb27-4"><a href="#cb27-4"></a><span class="kw">import</span> <span class="op">(</span></span>
<span id="cb27-5"><a href="#cb27-5"></a>    <span class="st">"fmt"</span></span>
<span id="cb27-6"><a href="#cb27-6"></a><span class="op">)</span></span>
<span id="cb27-7"><a href="#cb27-7"></a></span>
<span id="cb27-8"><a href="#cb27-8"></a><span class="kw">type</span> ch <span class="kw">chan</span> <span class="kw">interface</span><span class="op">{}</span></span>
<span id="cb27-9"><a href="#cb27-9"></a></span>
<span id="cb27-10"><a href="#cb27-10"></a><span class="kw">func</span> <span class="op">(</span>c ch<span class="op">)</span> Push<span class="op">(</span>i <span class="kw">interface</span><span class="op">{})</span> <span class="op">{</span></span>
<span id="cb27-11"><a href="#cb27-11"></a>    c <span class="op">&lt;-</span> i</span>
<span id="cb27-12"><a href="#cb27-12"></a><span class="op">}</span></span>
<span id="cb27-13"><a href="#cb27-13"></a></span>
<span id="cb27-14"><a href="#cb27-14"></a><span class="kw">func</span> <span class="op">(</span>c ch<span class="op">)</span> Pop<span class="op">()</span> <span class="kw">interface</span><span class="op">{}</span> <span class="op">{</span></span>
<span id="cb27-15"><a href="#cb27-15"></a>    <span class="cf">return</span> <span class="op">&lt;-</span>c</span>
<span id="cb27-16"><a href="#cb27-16"></a><span class="op">}</span></span>
<span id="cb27-17"><a href="#cb27-17"></a></span>
<span id="cb27-18"><a href="#cb27-18"></a><span class="kw">func</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb27-19"><a href="#cb27-19"></a>    c <span class="op">:=</span> <span class="bu">make</span><span class="op">(</span>ch<span class="op">,</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb27-20"><a href="#cb27-20"></a>    c<span class="op">.</span>Push<span class="op">(</span><span class="st">"i"</span><span class="op">)</span></span>
<span id="cb27-21"><a href="#cb27-21"></a>    fmt<span class="op">.</span>Println<span class="op">(</span>c<span class="op">.</span>Pop<span class="op">())</span></span>
<span id="cb27-22"><a href="#cb27-22"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>如果需要对slice进行修改，通过返回值的方式重新赋值</li>
</ul>
<div class="sourceCode" id="cb28"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb28-1"><a href="#cb28-1"></a><span class="co">//Slice</span></span>
<span id="cb28-2"><a href="#cb28-2"></a><span class="kw">package</span> main</span>
<span id="cb28-3"><a href="#cb28-3"></a></span>
<span id="cb28-4"><a href="#cb28-4"></a><span class="kw">import</span> <span class="op">(</span></span>
<span id="cb28-5"><a href="#cb28-5"></a>    <span class="st">"fmt"</span></span>
<span id="cb28-6"><a href="#cb28-6"></a><span class="op">)</span></span>
<span id="cb28-7"><a href="#cb28-7"></a></span>
<span id="cb28-8"><a href="#cb28-8"></a><span class="kw">type</span> slice <span class="op">[]</span><span class="dt">byte</span></span>
<span id="cb28-9"><a href="#cb28-9"></a></span>
<span id="cb28-10"><a href="#cb28-10"></a><span class="kw">func</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb28-11"><a href="#cb28-11"></a>    s <span class="op">:=</span> <span class="bu">make</span><span class="op">(</span>slice<span class="op">,</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb28-12"><a href="#cb28-12"></a>    s <span class="op">=</span> s<span class="op">.</span>addOne<span class="op">(</span><span class="dv">42</span><span class="op">)</span></span>
<span id="cb28-13"><a href="#cb28-13"></a>    fmt<span class="op">.</span>Println<span class="op">(</span>s<span class="op">)</span></span>
<span id="cb28-14"><a href="#cb28-14"></a><span class="op">}</span></span>
<span id="cb28-15"><a href="#cb28-15"></a></span>
<span id="cb28-16"><a href="#cb28-16"></a><span class="kw">func</span> <span class="op">(</span>s slice<span class="op">)</span> addOne<span class="op">(</span>b <span class="dt">byte</span><span class="op">)</span> <span class="op">[]</span><span class="dt">byte</span> <span class="op">{</span></span>
<span id="cb28-17"><a href="#cb28-17"></a>    <span class="cf">return</span> <span class="bu">append</span><span class="op">(</span>s<span class="op">,</span> b<span class="op">)</span></span>
<span id="cb28-18"><a href="#cb28-18"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>如果该方法需要更改接收者，则接收者必须是指针。</li>
<li>如果接收者是包含sync.Mutex或类似同步字段的结构，则接收者必须是一个指针以避免复制。</li>
</ul>
<div class="sourceCode" id="cb29"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb29-1"><a href="#cb29-1"></a><span class="kw">package</span> main</span>
<span id="cb29-2"><a href="#cb29-2"></a></span>
<span id="cb29-3"><a href="#cb29-3"></a><span class="kw">import</span> <span class="op">(</span></span>
<span id="cb29-4"><a href="#cb29-4"></a>    <span class="st">"sync"</span></span>
<span id="cb29-5"><a href="#cb29-5"></a><span class="op">)</span></span>
<span id="cb29-6"><a href="#cb29-6"></a></span>
<span id="cb29-7"><a href="#cb29-7"></a><span class="kw">type</span> T <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb29-8"><a href="#cb29-8"></a>    m sync<span class="op">.</span>Mutex</span>
<span id="cb29-9"><a href="#cb29-9"></a><span class="op">}</span></span>
<span id="cb29-10"><a href="#cb29-10"></a></span>
<span id="cb29-11"><a href="#cb29-11"></a><span class="kw">func</span> <span class="op">(</span>t <span class="op">*</span>T<span class="op">)</span> lock<span class="op">()</span> <span class="op">{</span></span>
<span id="cb29-12"><a href="#cb29-12"></a>    t<span class="op">.</span>m<span class="op">.</span>Lock<span class="op">()</span></span>
<span id="cb29-13"><a href="#cb29-13"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>如果接收者是大型结构或数组，则指针接收者效率更高。多大是大型？假设这等效于将其所有元素作为参数传递给方法。如果感觉太大，则对于接收者来说也太大。</li>
</ul>
<div class="sourceCode" id="cb30"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb30-1"><a href="#cb30-1"></a>如果接收者是大的结构体或者数组，使用指针传递会更有效率</span>
<span id="cb30-2"><a href="#cb30-2"></a></span>
<span id="cb30-3"><a href="#cb30-3"></a><span class="kw">package</span> main</span>
<span id="cb30-4"><a href="#cb30-4"></a></span>
<span id="cb30-5"><a href="#cb30-5"></a><span class="kw">import</span> <span class="op">(</span></span>
<span id="cb30-6"><a href="#cb30-6"></a>    <span class="st">"fmt"</span></span>
<span id="cb30-7"><a href="#cb30-7"></a><span class="op">)</span></span>
<span id="cb30-8"><a href="#cb30-8"></a></span>
<span id="cb30-9"><a href="#cb30-9"></a><span class="kw">type</span> T <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb30-10"><a href="#cb30-10"></a>    data <span class="op">[</span><span class="dv">1024</span><span class="op">]</span><span class="dt">byte</span></span>
<span id="cb30-11"><a href="#cb30-11"></a><span class="op">}</span></span>
<span id="cb30-12"><a href="#cb30-12"></a></span>
<span id="cb30-13"><a href="#cb30-13"></a><span class="kw">func</span> <span class="op">(</span>t <span class="op">*</span>T<span class="op">)</span> Get<span class="op">()</span> <span class="dt">byte</span> <span class="op">{</span></span>
<span id="cb30-14"><a href="#cb30-14"></a>    <span class="cf">return</span> t<span class="op">.</span>data<span class="op">[</span><span class="dv">0</span><span class="op">]</span></span>
<span id="cb30-15"><a href="#cb30-15"></a><span class="op">}</span></span>
<span id="cb30-16"><a href="#cb30-16"></a></span>
<span id="cb30-17"><a href="#cb30-17"></a><span class="kw">func</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb30-18"><a href="#cb30-18"></a>    t <span class="op">:=</span> <span class="bu">new</span><span class="op">(</span>T<span class="op">)</span></span>
<span id="cb30-19"><a href="#cb30-19"></a>    fmt<span class="op">.</span>Println<span class="op">(</span>t<span class="op">.</span>Get<span class="op">())</span></span>
<span id="cb30-20"><a href="#cb30-20"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>函数或方法（同时执行或从该方法调用时）是否会使接收者发生变化？ 值类型在调用方法时创建接收者的副本，因此外部更新将不会应用于该接收者。 如果更改必须在原始接收者中可见，则接收者必须是指针。</li>
<li>如果接收者是结构体，数组或切片，并且其任何元素都是指向可能正在修改的对象的指针，则最好使用指针接收者，因为它会使读者更加清楚意图。</li>
<li>如果接收者是一个很小的数组或结构，自然是一个值类型（例如，诸如time.Time类型），没有可变字段且没有指针，或者仅仅是一个简单的基本类型（如int或string），值接收者是合理的。 值接收者可以减少可以生成的垃圾数量； 如果将值传递给值方法，则可以使用堆栈上的副本而不是在堆上分配。 （编译器会尽量避免这种分配，但是它不可能总是成功。）由于这个原因，请勿在没有进行概要分析的情况下选择值类型接收者。</li>
<li>最后，如有疑问，请使用指针接收者。 ## 变量名 Go中的变量名应该简短而不是冗长。 对于范围有限的局部变量尤其如此。 <strong>比起 lineCount 更倾向于 c。比起 sliceIndex 更倾向于 i。</strong></li>
</ul>
</section>
<section id="代码分析" class="level2" data-number="17">
<h2 data-number="17" class="anchored" data-anchor-id="代码分析"><span class="header-section-number">17</span> 代码分析</h2>
<ul>
<li><strong>静态分析我们的源码存在的各种问题，例如多余的代码，提前return的逻辑，struct的tag是否符合标准等。</strong></li>
</ul>
<div class="sourceCode" id="cb31"><pre class="sourceCode numberSource go number-lines code-with-copy"><code class="sourceCode go"><span id="cb31-1"><a href="#cb31-1"></a><span class="cf">go</span> vet <span class="op">.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="gangoods/quarto_comment" data-repo-id="R_kgDOLw5H7w" data-category="Announcements" data-category-id="DIC_kwDOLw5H784Ce0jQ" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" data-loading="lazy" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark">
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../../../docs/back-end/go/infrastructure/test.html" class="pagination-link" aria-label="测试">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">测试</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




</body></html>